<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฃุฏุงุฉ ุชูุธูู ูููุฐุฌ ุจูุงุบุงุช ุงูุชุฏุฎู ุงูุณุฑูุน</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            direction: rtl;
            text-align: center;
            background-color: white;
            color: #333;
        }
        h1 {
            color: #2196F3;
            font-size: 2em;
            margin-bottom: 20px;
            text-shadow: 0px 0px 5px #2196F3;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        textarea {
            width: 80%;
            height: 200px;
            margin-bottom: 20px;
            border-radius: 10px;
            border: 2px solid #2196F3;
            padding: 10px;
            font-size: 1em;
            background-color: white;
            color: #333;
            resize: none;
            box-shadow: 0px 0px 10px #2196F3;
        }
        button {
            background-color: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1.2em;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
            transition: 0.3s;
            box-shadow: 0px 0px 15px #2196F3;
        }
        button:hover {
            background-color: #1976D2;
            box-shadow: 0px 0px 20px #1976D2;
        }
        table {
            width: 90%;
            margin: 20px auto;
            border-collapse: collapse;
            box-shadow: 0px 0px 20px #2196F3;
        }
        table, th, td {
            border: 1px solid #2196F3;
        }
        th, td {
            padding: 10px;
            text-align: center;
            color: #2196F3;
            font-size: 1em;
        }
        th {
            background-color: #2196F3;
            color: white;
        }
        .instruction {
            font-size: 1em;
            color: #2196F3;
            margin-bottom: 15px;
            text-shadow: 0px 0px 5px #2196F3;
        }
        .hidden {
            display: none;
        }
        footer {
            margin-top: 30px;
            font-size: 0.8em;
            color: red;
            text-shadow: 1px 1px 2px #000;
            text-align: center;
        }
        footer a {
            color: #2196F3;
            text-decoration: none;
        }
        footer a:hover {
            text-decoration: underline;
        }
        .version {
            font-size: 0.9em;
            color: #555;
            margin-top: 10px;
        }
        .leader {
            font-size: 1.2em;
            color: #2196F3;
            margin-top: 20px;
            text-shadow: 0px 0px 5px #2196F3;
        }
    </style>
</head>
<body>

    <h1> ุฃุฏุงุฉ ุชูุธูู ูููุฐุฌ ุจูุงุบุงุช ุงูุชุฏุฎู ุงูุณุฑูุน ๐ช </h1>

    <div class="container">
        <label class="instruction">ุฃุฏุฎู ูุต ูููุฐุฌ ุงูุจูุงุบุงุช ููุง:</label>
        <textarea id="dataInput" placeholder="ุงูุตู ุงููููุฐุฌ ููุง..."></textarea>
        <button onclick="processData()">ุชูุธูู ุงูุจูุงูุงุช</button>
    </div>

    <table id="dataTable" class="hidden">
        <thead>
            <tr>
                <th>ุงููุทุงุน</th>
                <th>ุงุณุชุฌุงุจุฉ ุฃูููุฉ</th>
                <th>ุงุณุชุฌุงุจุฉ ุฏุงุนูุฉ</th>
                <th>ุฅุฌูุงูู ุงููุทุงุน</th>
                <th>ุฃุฑูุงู ุงูุจูุงุบุงุช</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <div id="totalContainer" class="hidden">
        <h2 style="color:#2196F3; margin-top:30px; text-shadow:0px 0px 5px #2196F3;">ุฅุฌูุงูู ููุทูุฉ ุงูุฑูุงุถ: <span id="totalRiyadh"></span></h2>
    </div>

    <div id="leaderContainer" class="leader hidden">
        ูุงุฆุฏ ุงูููุทูุฉ ุงูููุงูุจ: <span id="leaderName"></span>
    </div>

    <button id="copyButton" class="hidden" onclick="copyTableData()">ูุณุฎ ุงูุจูุงูุงุช</button>

    <footer>
        <p><span style="color: #000000;">Design and Development by</span> <span style="color: #ff0000;">Ali Alshahrani</span></p>
        <div class="version">ุฅุตุฏุงุฑ ุงููุณุฎุฉ: 1.0.0</div>
    </footer>

    <script>
        function processData() {
            const input = document.getElementById("dataInput").value;
            if (!input.trim()) {
                alert("ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงูุจูุงูุงุช ุฃููุงู");
                return;
            }

            // ูููู ุจุงุณุชุฎุฑุงุฌ ุงููุทุงุนุงุช ุจุงุณุชุฎุฏุงู ุงูููุท ุงููุญุฏุฏ
            // ุงููุทุงุนุงุช ุชุฃุชู ุจูุฐุง ุงูุดูู: *ูุทุงุน ุนูููุงุช [ุงุณู ุงููุทุงุน]:*
            // ุจุนุฏ ุฐูู ูุจุญุซ ุนู ุงูุงุณุชุฌุงุจุฉ ุงูุฃูููุฉ, ุงูุงุณุชุฌุงุจุฉ ุงูุฏุงุนูุฉ, ุฅุฌูุงูู ุงููุทุงุน, ูุฃุฑูุงู ุงูุจูุงุบุงุช
            const sectors = input.split(/\*ูุทุงุน\s+ุนูููุงุช\s+(.*?)\:\*/);
            // ุงููุตูููุฉ ุณุชุญุชูู ุนูู ุนูุงุตุฑ ูุงุฑุบุฉ ูู ุงูุจุฏุงูุฉ ูุฐูู ูุชุฌุงูู ุงูุฃูู
            let parsedSectors = [];
            let totalRiyadh = null;
            let leaderName = null;

            // ุงูุจุญุซ ุนู ุฅุฌูุงูู ููุทูุฉ ุงูุฑูุงุถ
            const totalMatch = input.match(/\*ุฅุฌูุงูู ููุทูุฉ ุงูุฑูุงุถ:\*\s*(\d+)/);
            if (totalMatch) {
                totalRiyadh = totalMatch[1];
            }

            // ุงูุจุญุซ ุนู ูุงุฆุฏ ุงูููุทูุฉ ุงูููุงูุจ
            const leaderMatch = input.match(/\*ูุงุฆุฏ ุงูููุทูุฉ ุงูููุงูุจ:\*\s*(.*)/);
            if (leaderMatch) {
                leaderName = leaderMatch[1].trim();
            }

            // ูุงุญุธูุง ุฃู ุงูุณุจูุช ุณูุฌูุจ ุฃุณูุงุก ุงููุทุงุนุงุช ูู ุงูููุงูุน ุงููุฑุฏูุฉ (1,3,5...) ูุน ุจููุฉ ุงููุญุชูู ูู ููุณ ุงูุนูุตุฑ
            // ูู ูุทุงุน ุณูููู ูู ุดูู:
            // [ุงุณู ุงููุทุงุน] : [ูุญุชูู ุงููุทุงุน]
            // sectors = ["", "ุงูุบุฑุจ", "\n- ุงุณุชุฌุงุจุฉ ุฃูููุฉ: 0 ...", "ุงูุดุฑู", "\n- ุงุณุชุฌุงุจุฉ ุฃูููุฉ: 5 ...", ...]
            // ูุฐูู ูุชุนุงูู ูุนูุง ุนูู ุดูู ุฃุฒูุงุฌ: ุงุณู ุงููุทุงุน ูุงูุนูุตุฑ ุงูุฐู ูููู
            for (let i = 1; i < sectors.length; i += 2) {
                const sectorName = sectors[i].trim();
                const sectorContent = sectors[i+1] ? sectors[i+1] : "";

                if (!sectorName) continue;

                const initialMatch = sectorContent.match(/ุงุณุชุฌุงุจุฉ ุฃูููุฉ:\s*(\d+)/);
                const supportMatch = sectorContent.match(/ุงุณุชุฌุงุจุฉ ุฏุงุนูุฉ:\s*(\d+)/);
                const totalSectorMatch = sectorContent.match(/ุฅุฌูุงูู ูุทุงุน.*:\s*(\d+)/);

                let initial = initialMatch ? initialMatch[1] : "0";
                let support = supportMatch ? supportMatch[1] : "0";
                let sectorTotal = totalSectorMatch ? totalSectorMatch[1] : "0";

                // ุฃุฑูุงู ุงูุจูุงุบุงุช
                let reports = [];
                // ุงูููุท: ุฑูู ุงูุจูุงุบ 1: 120293
                // ูุจุญุซ ุนู ุฌููุน ุฃุฑูุงู ุงูุจูุงุบุงุช
                let reportRegex = /ุฑูู ุงูุจูุงุบ\s*\d+:\s*(\d+)/g;
                let reportMatch;
                while ((reportMatch = reportRegex.exec(sectorContent)) !== null) {
                    reports.push(reportMatch[1]);
                }

                parsedSectors.push({
                    name: sectorName,
                    initial: initial,
                    support: support,
                    total: sectorTotal,
                    reports: reports
                });
            }

            // ุงูุขู ูุนุฑุถ ุงูุจูุงูุงุช ูู ุงูุฌุฏูู
            const table = document.getElementById("dataTable");
            const tbody = table.querySelector("tbody");
            tbody.innerHTML = "";

            parsedSectors.forEach(sector => {
                const tr = document.createElement("tr");

                const tdName = document.createElement("td");
                tdName.textContent = sector.name;
                tr.appendChild(tdName);

                const tdInitial = document.createElement("td");
                tdInitial.textContent = sector.initial;
                tr.appendChild(tdInitial);

                const tdSupport = document.createElement("td");
                tdSupport.textContent = sector.support;
                tr.appendChild(tdSupport);

                const tdTotal = document.createElement("td");
                tdTotal.textContent = sector.total;
                tr.appendChild(tdTotal);

                const tdReports = document.createElement("td");
                tdReports.textContent = sector.reports.length > 0 ? sector.reports.join("ุ ") : "ูุง ููุฌุฏ";
                tr.appendChild(tdReports);

                tbody.appendChild(tr);
            });

            // ุฅุธูุงุฑ ุงูุฌุฏูู
            table.classList.remove("hidden");

            // ุฅุธูุงุฑ ุงูุฅุฌูุงูู ุฅุฐุง ูุฌุฏ
            if (totalRiyadh !== null) {
                document.getElementById("totalRiyadh").textContent = totalRiyadh;
                document.getElementById("totalContainer").classList.remove("hidden");
            } else {
                document.getElementById("totalContainer").classList.add("hidden");
            }

            // ุฅุธูุงุฑ ุงููุงุฆุฏ ุงูููุงูุจ ุฅุฐุง ูุฌุฏ
            if (leaderName !== null && leaderName !== "") {
                document.getElementById("leaderName").textContent = leaderName;
                document.getElementById("leaderContainer").classList.remove("hidden");
            } else {
                document.getElementById("leaderContainer").classList.add("hidden");
            }

            // ุฅุธูุงุฑ ุฒุฑ ุงููุณุฎ
            const copyButton = document.getElementById("copyButton");
            if (parsedSectors.length > 0) {
                copyButton.classList.remove("hidden");
            } else {
                copyButton.classList.add("hidden");
            }
        }

        function copyTableData() {
            const table = document.querySelector("#dataTable");
            const range = document.createRange();
            range.selectNodeContents(table);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            document.execCommand("copy");
            selection.removeAllRanges();
            alert("ุชู ูุณุฎ ุงูุจูุงูุงุช ุจูุฌุงุญ!");
        }
    </script>

</body>
</html>

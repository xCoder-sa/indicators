<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم فريق العمليات</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* إعدادات أساسية */
        body {
            font-family: 'Cairo', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f7fa;
            direction: rtl;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* لوحة التحكم الجانبية */
        .sidebar {
            width: 250px;
            background-color: #2d3436;
            color: #dfe6e9;
            display: flex;
            flex-direction: column;
            padding-top: 20px;
            transition: width 0.3s;
        }

        .sidebar.collapsed {
            width: 60px;
        }

        .sidebar .logo {
            text-align: center;
            font-size: 20px;
            margin-bottom: 30px;
            font-weight: bold;
            color: #dfe6e9;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
            flex-grow: 1;
        }

        .sidebar ul li {
            padding: 15px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .sidebar ul li:hover, .sidebar ul li.active {
            background-color: #636e72;
        }

        .sidebar ul li i {
            margin-left: 10px;
        }

        /* المحتوى الرئيسي */
        .main-content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header h2 {
            margin: 0;
            color: #2d3436;
        }

        /* النموذج */
        .form-container {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .form-section {
            margin-bottom: 25px;
        }

        .form-section label {
            display: block;
            margin-bottom: 8px;
            color: #2d3436;
            font-weight: bold;
            font-size: 16px;
        }

        .form-section input[type="number"],
        .form-section input[type="text"],
        .form-section textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #b2bec3;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
            background-color: #dfe6e9;
        }

        .form-section input[type="number"]:focus,
        .form-section input[type="text"]:focus,
        .form-section textarea:focus {
            border-color: #0984e3;
            outline: none;
            background-color: #ffffff;
        }

        .form-section table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .form-section table th,
        .form-section table td {
            border: 1px solid #b2bec3;
            padding: 12px;
            text-align: center;
        }

        .form-section table th {
            background-color: #74b9ff;
            color: #ffffff;
        }

        .form-section button {
            padding: 10px 15px;
            background-color: #0984e3;
            border: none;
            border-radius: 6px;
            color: #ffffff;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 10px;
        }

        .form-section button:hover {
            background-color: #74b9ff;
        }

        /* زر الإرسال */
        .submit-btn {
            width: 100%;
            padding: 15px;
            background-color: #00b894;
            border: none;
            border-radius: 6px;
            color: #ffffff;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .submit-btn:hover {
            background-color: #55efc4;
        }

        /* تصميم متجاوب */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                height: 100%;
                z-index: 1000;
                left: -250px;
            }

            .sidebar.active {
                left: 0;
            }

            .sidebar.collapsed {
                left: -60px;
            }

            .main-content {
                padding: 20px 10px;
            }

            .hamburger-btn {
                display: block;
                position: fixed;
                top: 15px;
                left: 15px;
                background-color: #2d3436;
                color: #dfe6e9;
                border: none;
                padding: 10px;
                border-radius: 5px;
                cursor: pointer;
                z-index: 1100;
            }
        }

        @media (min-width: 769px) {
            .hamburger-btn {
                display: none;
            }
        }
    </style>
</head>
<body>

    <!-- زر الهامبرجر للأجهزة الصغيرة -->
    <button class="hamburger-btn" id="hamburgerBtn"><i class="fas fa-bars"></i></button>

    <!-- لوحة التحكم الجانبية -->
    <div class="sidebar" id="sidebar">
        <div class="logo">لوحة التحكم</div>
        <ul>
            <li class="active" data-form="resourceStatus"><i class="fas fa-chart-line"></i> فريق الإسعاف الارضي</li>
            <!-- يمكن إضافة عناصر جديدة هنا للنماذج المستقبلية -->
            <!-- مثال:
            <li data-form="anotherForm"><i class="fas fa-file-alt"></i> نموذج آخر</li>
            -->
        </ul>
    </div>

    <!-- المحتوى الرئيسي -->
    <div class="main-content">
        <div class="header">
            <h2>لوحة تحكم فريق العمليات</h2>
        </div>

        <!-- نموذج الموارد حسب الوضع الراهن -->
        <div class="form-container" id="resourceStatus">
            <div class="form-section">
                <label for="total_service_providers">إجمالي مقدمي الخدمة الإسعافية:</label>
                <input type="number" id="total_service_providers" placeholder="إجمالي مقدمي الخدمة الإسعافية" required>
            </div>
            <div class="form-section">
                <label for="employees">الموظفين منهم:</label>
                <input type="number" id="employees" placeholder="عدد الموظفين" required>
            </div>
            <div class="form-section">
                <label for="volunteers">المتطوعين منهم:</label>
                <input type="number" id="volunteers" placeholder="عدد المتطوعين" required>
            </div>
            <div class="form-section">
                <label for="total_operational_units">إجمالي الوحدات التشغيلية:</label>
                <input type="number" id="total_operational_units" placeholder="إجمالي الوحدات التشغيلية" required>
            </div>
            <div class="form-section">
                <label for="male_teams">فرق راجلة:</label>
                <input type="number" id="male_teams" placeholder="عدد فرق راجلة" required>
            </div>
            <div class="form-section">
                <label for="mechanical_teams">فرق آليات:</label>
                <input type="number" id="mechanical_teams" placeholder="عدد فرق آليات" required>
            </div>
            <div class="form-section">
                <label for="vehicle_teams">فرق مركبات:</label>
                <input type="number" id="vehicle_teams" placeholder="عدد فرق مركبات" required>
            </div>
            <div class="form-section">
                <label>توزيع الفرق بحسب مواقعها:</label>
                <div class="sub-section">
                    <label for="haram">الحرم المكي:</label>
                    <input type="number" id="haram" placeholder="عدد الفرق في الحرم المكي" required>
                </div>
                <div class="sub-section">
                    <label for="holy_capital">العاصمة المقدسة:</label>
                    <input type="number" id="holy_capital" placeholder="عدد الفرق في العاصمة المقدسة" required>
                </div>
                <div class="sub-section">
                    <label for="muzdalifah">مزدلفة:</label>
                    <input type="number" id="muzdalifah" placeholder="عدد الفرق في مزدلفة" required>
                </div>
                <div class="sub-section">
                    <label for="arafat">عرفات:</label>
                    <input type="number" id="arafat" placeholder="عدد الفرق في عرفات" required>
                </div>
                <div class="sub-section">
                    <label for="mina">منى:</label>
                    <input type="number" id="mina" placeholder="عدد الفرق في منى" required>
                </div>
                <div class="sub-section">
                    <label for="hajj_road">طريق الحاج:</label>
                    <input type="number" id="hajj_road" placeholder="عدد الفرق في طريق الحاج" required>
                </div>
            </div>
            <div class="form-section">
                <h3>أهداف المناوبة:</h3>
                <table>
                    <thead>
                        <tr>
                            <th>الهدف</th>
                            <th>التحديث</th>
                        </tr>
                    </thead>
                    <tbody id="shift_goals">
                        <tr>
                            <td><input type="text" placeholder="الهدف" required></td>
                            <td><input type="text" placeholder="التحديث" required></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="الهدف" required></td>
                            <td><input type="text" placeholder="التحديث" required></td>
                        </tr>
                        <!-- يمكن إضافة المزيد من الصفوف حسب الحاجة -->
                    </tbody>
                </table>
                <button type="button" onclick="addShiftGoal()">إضافة هدف آخر</button>
            </div>
            <div class="form-section">
                <label for="shift_notes">ملاحظات المناوبة:</label>
                <textarea id="shift_notes" rows="4" placeholder="ملاحظات المناوبة" required></textarea>
            </div>
            <div class="form-section">
                <label for="name">الاسم:</label>
                <input type="text" id="name" placeholder="أدخل اسمك" required>
            </div>
            <button type="button" class="submit-btn" onclick="submitForm()">إرسال النموذج</button>
        </div>

        <!-- يمكن إضافة نماذج أخرى هنا في المستقبل -->
    </div>

    <script>
        // تفعيل لوحة التحكم الجانبية
        const sidebar = document.getElementById('sidebar');
        const hamburgerBtn = document.getElementById('hamburgerBtn');
        const menuItems = document.querySelectorAll('.sidebar ul li');
        const forms = document.querySelectorAll('.form-container');

        hamburgerBtn.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });

        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                // إزالة الفعالية من جميع العناصر
                menuItems.forEach(el => el.classList.remove('active'));
                // إضافة الفعالية للعناصر المحددة
                item.classList.add('active');

                // إخفاء جميع النماذج
                forms.forEach(form => form.style.display = 'none');
                // إظهار النموذج المحدد
                const formToShow = document.getElementById(item.getAttribute('data-form'));
                if (formToShow) {
                    formToShow.style.display = 'block';
                }
            });
        });

        // دالة لإضافة صف جديد في جدول أهداف المناوبة
        function addShiftGoal() {
            const shiftGoals = document.getElementById('shift_goals');
            const newRow = document.createElement('tr');

            const goalCell = document.createElement('td');
            const goalInput = document.createElement('input');
            goalInput.type = 'text';
            goalInput.placeholder = 'الهدف';
            goalInput.required = true;
            goalCell.appendChild(goalInput);

            const updateCell = document.createElement('td');
            const updateInput = document.createElement('input');
            updateInput.type = 'text';
            updateInput.placeholder = 'التحديث';
            updateInput.required = true;
            updateCell.appendChild(updateInput);

            newRow.appendChild(goalCell);
            newRow.appendChild(updateCell);

            shiftGoals.appendChild(newRow);
        }

        // دالة لإرسال النموذج عبر واتساب
        function submitForm() {
            // التحقق من تعبئة جميع الحقول المطلوبة
            const requiredFields = document.querySelectorAll('input[required], textarea[required]');
            let allFieldsFilled = true;

            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.border = '2px solid #d63031';
                    allFieldsFilled = false;
                } else {
                    field.style.border = '1px solid #b2bec3';
                }
            });

            if (!allFieldsFilled) {
                alert("يرجى تعبئة جميع الحقول المطلوبة.");
                return;
            }

            // جمع البيانات من النموذج
            const data = {
                total_service_providers: document.getElementById('total_service_providers').value,
                employees: document.getElementById('employees').value,
                volunteers: document.getElementById('volunteers').value,
                total_operational_units: document.getElementById('total_operational_units').value,
                male_teams: document.getElementById('male_teams').value,
                mechanical_teams: document.getElementById('mechanical_teams').value,
                vehicle_teams: document.getElementById('vehicle_teams').value,
                team_distribution: {
                    haram: document.getElementById('haram').value,
                    holy_capital: document.getElementById('holy_capital').value,
                    muzdalifah: document.getElementById('muzdalifah').value,
                    arafat: document.getElementById('arafat').value,
                    mina: document.getElementById('mina').value,
                    hajj_road: document.getElementById('hajj_road').value
                },
                shift_goals: [],
                shift_notes: document.getElementById('shift_notes').value,
                name: document.getElementById('name').value
            };

            // جمع أهداف المناوبة
            const goals = document.querySelectorAll('#shift_goals tr');
            goals.forEach(row => {
                const goalInput = row.cells[0].querySelector('input');
                const updateInput = row.cells[1].querySelector('input');
                if (goalInput.value.trim() !== '' && updateInput.value.trim() !== '') {
                    const goal = goalInput.value.trim();
                    const update = updateInput.value.trim();
                    data.shift_goals.push({ goal, update });
                }
            });

            // إنشاء نص الرسالة لواتساب
            let formText = `*== الموارد حسب الوضع الراهن ==*\n\n`;
            formText += `*إجمالي مقدمي الخدمة الإسعافية:* ${data.total_service_providers}\n`;
            formText += `*الموظفين منهم:* ${data.employees}\n`;
            formText += `*المتطوعين منهم:* ${data.volunteers}\n`;
            formText += `*إجمالي الوحدات التشغيلية:* ${data.total_operational_units}\n`;
            formText += `*فرق راجلة:* ${data.male_teams}\n`;
            formText += `*فرق آليات:* ${data.mechanical_teams}\n`;
            formText += `*فرق مركبات:* ${data.vehicle_teams}\n\n`;

            formText += `*توزيع الفرق بحسب مواقعها:*\n`;
            formText += `- الحرم المكي: ${data.team_distribution.haram}\n`;
            formText += `- العاصمة المقدسة: ${data.team_distribution.holy_capital}\n`;
            formText += `- مزدلفة: ${data.team_distribution.muzdalifah}\n`;
            formText += `- عرفات: ${data.team_distribution.arafat}\n`;
            formText += `- منى: ${data.team_distribution.mina}\n`;
            formText += `- طريق الحاج: ${data.team_distribution.hajj_road}\n\n`;

            formText += `*أهداف المناوبة:*\n`;
            data.shift_goals.forEach((goalObj, index) => {
                formText += `${index + 1}- الهدف: ${goalObj.goal}\n   التحديث: ${goalObj.update}\n`;
            });
            formText += `\n*ملاحظات المناوبة:* ${data.shift_notes}\n`;
            formText += `*الاسم:* ${data.name}\n`;

            console.log(formText); // تأكيد عرض البيانات المجمعة

            // تشفير النص
            const encodedText = encodeURIComponent(formText);

            // التحقق من نوع الجهاز أو المتصفح
            if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                // على أجهزة iOS، استخدم رابط واتساب المباشر
                const whatsappUrl = `whatsapp://send?text=${encodedText}`;
                window.open(whatsappUrl, '_blank');
            } else {
                // على باقي الأجهزة، استخدم wa.me لفتح الرابط
                const whatsappUrl = `https://wa.me/?text=${encodedText}`;
                window.open(whatsappUrl, '_blank');
            }
        }

        // إظهار النموذج الافتراضي عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', () => {
            // إظهار النموذج الافتراضي
            const defaultForm = document.querySelector('.sidebar ul li.active');
            if (defaultForm) {
                const formId = defaultForm.getAttribute('data-form');
                const formToShow = document.getElementById(formId);
                if (formToShow) {
                    formToShow.style.display = 'block';
                }
            }
        });
    </script>
</body>
</html>

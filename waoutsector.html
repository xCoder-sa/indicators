<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم الإسعاف</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f4f8;
            margin: 0;
            padding: 0;
            direction: rtl;
        }
        /* شريط التنقل العلوي */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #ffffff;
            padding: 15px 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        .navbar .logo {
            font-size: 24px;
            font-weight: bold;
            color: #3498db;
        }
        .menu-header {
            display: none; /* سيتم عرضه فقط على الشاشات الصغيرة */
            font-size: 18px;
            font-weight: bold;
            padding: 10px 20px;
            background-color: #ffffff;
            width: 100%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .navbar .menu {
            display: flex;
            list-style-type: none;
            margin: 0;
            padding: 0;
        }
        .navbar .menu li {
            margin-left: 20px;
        }
        .navbar .menu li a {
            text-decoration: none;
            color: #333;
            font-size: 16px;
            padding: 8px 12px;
            border-radius: 4px;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
        }
        .navbar .menu li a i {
            margin-left: 5px;
        }
        .navbar .menu li a:hover {
            background-color: #ecf0f1;
        }
        /* أيقونة الهامبرجر للهواتف */
        .hamburger {
            display: none;
            font-size: 24px;
            color: #333;
            cursor: pointer;
        }
        /* قائمة التنقل القابلة للتمرير على الهواتف */
        @media (max-width: 767px) {
            .navbar {
                flex-direction: column;
                align-items: flex-start;
            }
            .menu-header {
                display: block;
            }
            .menu {
                display: flex;
                overflow-x: auto;
                white-space: nowrap;
                width: 100%;
                background-color: #ffffff;
                padding: 10px 20px;
            }
            .menu li {
                margin: 0 10px;
            }
            .menu li a {
                padding: 10px 15px;
                display: inline-block;
            }
            .hamburger {
                display: none;
            }
        }
        /* تحسينات إضافية للتمرير الأفقي */
        .menu::-webkit-scrollbar {
            height: 8px;
        }

        .menu::-webkit-scrollbar-thumb {
            background-color: #3498db;
            border-radius: 4px;
        }

        .menu::-webkit-scrollbar-track {
            background-color: #f0f4f8;
        }
        /* المحتوى الرئيسي */
        .container {
            padding: 80px 20px 20px 20px; /* زيادة padding-top للعلامة الثابتة */
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }
        h2 {
            color: #3498db;
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }
        label {
            margin-top: 10px;
            display: block;
            color: #333;
            font-weight: bold;
            font-size: 15px;
        }
        input[type="text"], input[type="date"], input[type="time"], input[type="datetime-local"], textarea, select {
            width: 100%;
            padding: 10px;
            margin: 5px 0 15px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        input[type="text"]:focus, input[type="date"]:focus, input[type="time"]:focus, select:focus {
            border-color: #3498db;
            outline: none;
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #3498db;
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #1d6a9c;
        }
        .copy-notification {
            display: none;
            text-align: center;
            color: green;
            font-size: 14px;
            margin-top: 15px;
        }
        .form-section {
            margin-bottom: 30px;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        /* تحسينات إضافية */
        .input-row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .input-small {
            flex: 1;
            min-width: 100px;
        }
    </style>
</head>
<body>

    <!-- شريط التنقل العلوي -->
    <nav class="navbar">
        <div class="logo">لوحة التحكم</div>
        <div class="menu-header">القائمة</div> <!-- العنوان الجديد -->
        <ul class="menu" id="menu">
            <li><a href="#" onclick="loadForm('senior_paramedic')"><i class="fas fa-user-md"></i> نموذج كبار المسعفين (داخلي)</a></li>
            <li><a href="#" onclick="loadForm('rapid_response_reports')"><i class="fas fa-car-crash"></i> نموذج بلاغات التدخل السريع</a></li>
            <li><a href="#" onclick="loadForm('senior_paramedic_outside')"><i class="fas fa-user-md"></i> نموذج كبار المسعفين (خارجي)</a></li>
            <li><a href="#" onclick="loadForm('operational_failure')"><i class="fas fa-exclamation-triangle"></i> نموذج فشل تشغيلي</a></li>
            <li><a href="#" onclick="loadForm('eco_reports')"><i class="fas fa-file-alt"></i> نموذج بلاغات إيكو</a></li>
            <li><a href="#" onclick="loadForm('major_event')"><i class="fas fa-calendar-alt"></i> نموذج حدث جسيم</a></li>
            <li><a href="#" onclick="loadForm('support_request')"><i class="fas fa-handshake"></i> طلب تفعيل خطة المساندة</a></li>
            <li><a href="#" onclick="loadForm('support_activation')"><i class="fas fa-check-circle"></i> قبول تفعيل خطة المساندة</a></li>
        </ul>
        <!-- إزالة أيقونة الهامبرجر -->
        <!--
        <div class="hamburger" id="hamburger">
            <i class="fas fa-bars"></i>
        </div>
        -->
    </nav>

    <!-- المحتوى الرئيسي -->
    <div class="container" id="form-container">
        <!-- النموذج الحالي يظهر هنا -->
    </div>

    <div class="copy-notification" id="copyNotification">
        تم النسخ بنجاح! يمكنك الآن إرسالها في قروب القيادات.
    </div>

    <script>
        /*
        // إزالة أو تعليق الكود المتعلق بالهامبرجر
        const hamburger = document.getElementById('hamburger');
        const menu = document.getElementById('menu');

        // تفعيل أو إخفاء القائمة على الهواتف عند النقر على الهامبرجر
        hamburger.addEventListener('click', (e) => {
            e.stopPropagation(); // منع النقر من الانتشار خارج القائمة
            menu.classList.toggle('active');
        });

        // إخفاء القائمة عند النقر خارجها
        document.addEventListener('click', function(event) {
            if (!menu.contains(event.target) && !hamburger.contains(event.target)) {
                menu.classList.remove('active');
            }
        });
        */

        function loadForm(formName) {
            const formContainer = document.getElementById('form-container');
            let formHTML = '';

            if (formName === 'senior_paramedic') {
                formHTML = `
                    <h2>نموذج كبار المسعفين</h2>
                    <div class="form-section">
                        <label for="senior_paramedic_sector">اختر القطاع:</label>
                        <select id="senior_paramedic_sector" onchange="toggleOtherSectorInput(this)">
                            <option value="الوسط">الوسط</option>
                            <option value="الجنوب">الجنوب</option>
                            <option value="الشرق">الشرق</option>
                            <option value="الغرب">الغرب</option>
                            <option value="الشمال">الشمال</option>
                            <option value="other">أخرى</option>
                        </select>
                        <input type="text" id="senior_paramedic_other_sector" placeholder="اكتب القطاع" style="display:none; margin-top: 10px;">

                        <label for="senior_paramedic_date">التاريخ:</label>
                        <input type="date" id="senior_paramedic_date" readonly>

                        <label for="senior_paramedic_time">التوقيت الحالي:</label>
                        <select id="senior_paramedic_time" class="time-select">
                            <option value="0:00 إلى 6:00">0:00 إلى 6:00</option>
                            <option value="6:00 إلى 12:00">6:00 إلى 12:00</option>
                            <option value="12:00 إلى 18:00">12:00 إلى 18:00</option>
                            <option value="18:00 إلى 0:00">18:00 إلى 0:00</option>
                        </select>

                        <label for="senior_paramedic_working_teams">عدد الفرق العاملة:</label>
                        <input type="text" id="senior_paramedic_working_teams">

                        <label for="senior_paramedic_total_teams">من أصل:</label>
                        <input type="text" id="senior_paramedic_total_teams">

                        <div class="input-row">
                            <div class="input-small">
                                <label for="senior_paramedic_rapid_response_teams">عدد فرق التدخل السريع:</label>
                                <input type="text" id="senior_paramedic_rapid_response_teams">
                            </div>
                            <div class="input-small">
                                <label for="senior_paramedic_operating_vehicles">عدد المركبات العاملة:</label>
                                <input type="text" id="senior_paramedic_operating_vehicles">
                            </div>
                            <div class="input-small">
                                <label for="senior_paramedic_broken_vehicles">عدد المركبات المتعطلة:</label>
                                <input type="text" id="senior_paramedic_broken_vehicles">
                            </div>
                            <div class="input-small">
                                <label for="senior_paramedic_reserve_vehicles">عدد المركبات الاحتياط:</label>
                                <input type="text" id="senior_paramedic_reserve_vehicles">
                            </div>
                        </div>

                        <label for="senior_paramedic_open_logistics_reports">بلاغات الدعم اللوجستي المفتوحة:</label>
                        <input type="text" id="senior_paramedic_open_logistics_reports">

                        <label for="senior_paramedic_coordination_teams">عدد العاملين في التنسيق والتحكم:</label>
                        <input type="text" id="senior_paramedic_coordination_teams">

                        <label for="senior_paramedic_logistics_support_teams">عدد العاملين في الدعم اللوجستي:</label>
                        <input type="text" id="senior_paramedic_logistics_support_teams">

                        <label for="senior_paramedic_hospitals_out_of_service">قائمة المستشفيات خارج الخدمة:</label>
                        <input type="text" id="senior_paramedic_hospitals_out_of_service">

                        <h2>الطلب</h2>

                        <label for="senior_paramedic_eco_reports">عدد بلاغات إنعاش إيكو:</label>
                        <input type="text" id="senior_paramedic_eco_reports">

                        <label for="senior_paramedic_delta_reports">عدد بلاغات دلتا:</label>
                        <input type="text" id="senior_paramedic_delta_reports">

                        <label for="senior_paramedic_charlie_reports">عدد بلاغات تشارلي:</label>
                        <input type="text" id="senior_paramedic_charlie_reports">

                        <label for="senior_paramedic_bravo_reports">عدد بلاغات برافو:</label>
                        <input type="text" id="senior_paramedic_bravo_reports">

                        <label for="senior_paramedic_alpha_reports">عدد بلاغات ألفا:</label>
                        <input type="text" id="senior_paramedic_alpha_reports">

                        <label for="senior_paramedic_omega_reports">عدد بلاغات أوميغا:</label>
                        <input type="text" id="senior_paramedic_omega_reports">

                        <label for="senior_paramedic_catheter_reports">عدد بلاغات القسطرة:</label>
                        <input type="text" id="senior_paramedic_catheter_reports">

                        <label for="senior_paramedic_stroke_reports">عدد بلاغات السكتة الدماغية:</label>
                        <input type="text" id="senior_paramedic_stroke_reports">

                        <h2>البلاغات</h2>

                        <label for="senior_paramedic_total_reports">إجمالي بلاغات القطاع:</label>
                        <input type="text" id="senior_paramedic_total_reports">

                        <label for="senior_paramedic_government_transfers">عدد الحالات المنقولة للقطاع الحكومي:</label>
                        <input type="text" id="senior_paramedic_government_transfers">

                        <label for="senior_paramedic_private_transfers">عدد الحالات المنقولة للقطاع الخاص:</label>
                        <input type="text" id="senior_paramedic_private_transfers">

                        <label for="senior_paramedic_untransferred_cases">عدد الحالات الغير منقولة:</label>
                        <input type="text" id="senior_paramedic_untransferred_cases">

                        <label for="senior_paramedic_paper_reports">عدد البلاغات المدونة ورقياً:</label>
                        <input type="text" id="senior_paramedic_paper_reports">

                        <h2>المخرجات</h2>

                        <label for="senior_paramedic_waiting_time">متوسط زمن الانتظار في قائمة الترحيل:</label>
                        <input type="text" id="senior_paramedic_waiting_time">

                        <label for="senior_paramedic_top_team">اعلى فرقة اسعافيه في عدد البلاغات:</label>
                        <input type="text" id="senior_paramedic_top_team">

                        <label for="senior_paramedic_average_reports">متوسط عدد البلاغات للفرق الاسعافية:</label>
                        <input type="text" id="senior_paramedic_average_reports">

                        <label for="senior_paramedic_response_rate">نسبة زمن الاستجابة خلال 8 دقائق للبلاغات الساخنة:</label>
                        <input type="text" id="senior_paramedic_response_rate">

                        <label for="senior_paramedic_average_response_time">متوسط زمن الاستجابة لبلاغات الحوادث المرورية الساخنة:</label>
                        <input type="text" id="senior_paramedic_average_response_time">

                        <label for="senior_paramedic_response_time_to_intervention">زمن الاستجابة حتى المباشرة:</label>
                        <input type="text" id="senior_paramedic_response_time_to_intervention">

                        <h2>ملاحظات النوبة</h2>

                        <label for="senior_paramedic_absence_in_shift">عدد الغياب في المناوبة:</label>
                        <input type="text" id="senior_paramedic_absence_in_shift">

                        <label for="senior_paramedic_cad_program_notes">ملاحظات برنامج الكاد:</label>
                        <textarea id="senior_paramedic_cad_program_notes" rows="4"></textarea>

                        <button onclick="sendWhatsAppMessage('senior_paramedic')">إرسال النموذج بالواتساب</button>
                    </div>
                `;
            }
            else if (formName === 'rapid_response_reports') {
                formHTML = `
                    <h2>نموذج بلاغات التدخل السريع</h2>
                    <div class="form-section">
                        <label for="rapid_response_reports_sector_west">قطاع عمليات الغرب:</label>
                        <input type="text" id="rapid_response_reports_sector_west" placeholder="أدخل العدد">

                        <label for="rapid_response_reports_sector_east">قطاع عمليات الشرق:</label>
                        <input type="text" id="rapid_response_reports_sector_east" placeholder="أدخل العدد">

                        <label for="rapid_response_reports_sector_central">قطاع عمليات الوسط:</label>
                        <input type="text" id="rapid_response_reports_sector_central" placeholder="أدخل العدد">

                        <label for="rapid_response_reports_sector_north">قطاع عمليات الشمال:</label>
                        <input type="text" id="rapid_response_reports_sector_north" placeholder="أدخل العدد">

                        <label for="rapid_response_reports_sector_south">قطاع عمليات الجنوب:</label>
                        <input type="text" id="rapid_response_reports_sector_south" placeholder="أدخل العدد">
                        
                        <button onclick="sendWhatsAppMessage('rapid_response_reports')">إرسال النموذج بالواتساب</button>
                    </div>
                `;
            }
            else if (formName === 'senior_paramedic_outside') {
                formHTML = `
                    <h2>نموذج كبار المسعفين (خارجي)</h2>
                    <div class="form-section">
                        <label for="sector">اختر القطاع:</label>
                        <select id="sector" onchange="toggleOtherSectorInput()">
                            <option value="رماح">رماح</option>
                            <option value="الافلاج">الافلاج</option>
                            <option value="الخرج">الخرج</option>
                            <option value="الدرعية">الدرعية</option>
                            <option value="الدوادمي">الدوادمي</option>
                            <option value="الزلفي">الزلفي</option>
                            <option value="الغاط">الغاط</option>
                            <option value="القويعية">القويعية</option>
                            <option value="المجمعة">المجمعة</option>
                            <option value="المزاحمية">المزاحمية</option>
                            <option value="حوطة بني تميم">حوطة بني تميم</option>
                            <option value="شقراء">شقراء</option>
                            <option value="عفيف">عفيف</option>
                            <option value="وادي الدواسر">وادي الدواسر</option>
                            <option value="other">أخرى</option>
                        </select>
                        <input type="text" id="other_sector" placeholder="اكتب القطاع" style="display:none; margin-top: 10px;">

                        <label for="date">التاريخ:</label>
                        <input type="date" id="date" readonly>

                        <label for="time">التوقيت الحالي:</label>
                        <select id="time">
                            <option value="09:00 إلى 15:00">09:00 إلى 15:00</option>
                            <option value="15:00 إلى 21:00">15:00 إلى 21:00</option>
                            <option value="21:00 إلى 03:00">21:00 إلى 03:00</option>
                            <option value="03:00 إلى 09:00">03:00 إلى 09:00</option>
                        </select>

                        <label for="working_teams">عدد الفرق العاملة:</label>
                        <input type="text" id="working_teams">

                        <label for="total_teams">من أصل:</label>
                        <input type="text" id="total_teams">

                        <div class="input-row">
                            <div class="input-small">
                                <label for="rapid_response_teams">عدد فرق التدخل السريع:</label>
                                <input type="text" id="rapid_response_teams">
                            </div>
                            <div class="input-small">
                                <label for="operating_vehicles">عدد المركبات العاملة:</label>
                                <input type="text" id="operating_vehicles">
                            </div>
                            <div class="input-small">
                                <label for="broken_vehicles">عدد المركبات المتعطلة:</label>
                                <input type="text" id="broken_vehicles">
                            </div>
                            <div class="input-small">
                                <label for="reserve_vehicles">عدد المركبات الاحتياط:</label>
                                <input type="text" id="reserve_vehicles">
                            </div>
                        </div>

                        <label for="open_logistics_reports">بلاغات الدعم اللوجستي المفتوحة:</label>
                        <input type="text" id="open_logistics_reports">

                        <label for="coordination_teams">عدد العاملين في التنسيق والتحكم:</label>
                        <input type="text" id="coordination_teams">

                        <label for="logistics_support_teams">عدد العاملين في الدعم اللوجستي:</label>
                        <input type="text" id="logistics_support_teams">

                        <label for="hospitals_out_of_service">قائمة المستشفيات خارج الخدمة:</label>
                        <input type="text" id="hospitals_out_of_service">

                        <h2>البلاغات</h2>

                        <label for="total_reports">إجمالي بلاغات القطاع:</label>
                        <input type="text" id="total_reports">

                        <label for="related_reports">البلاغات:</label>
                        <div id="reports-container">
                            <div class="input-pair">
                                <input type="text" placeholder="رقم البلاغ" class="report-number" style="width: 120px;">
                                <select class="report-type" style="width: 120px;">
                                    <option value="إيكو">إيكو</option>
                                    <option value="دلتا">دلتا</option>
                                    <option value="تشارلي">تشارلي</option>
                                    <option value="برافو">برافو</option>
                                </select>
                                <input type="text" placeholder="زمن الاستجابة" class="waiting_time" style="width: 120px;">
                            </div>
                        </div>
                        <button type="button" onclick="relatedreports()">إضافة بلاغ آخر</button>

                        <h2>المخرجات</h2>
                        <label for="response_time_to_intervention">متوسط زمن الاستجابة:</label>
                        <input type="text" id="response_time_to_intervention">

                        <h2>ملاحظات النوبة</h2>

                        <label for="absence_in_shift">عدد الغياب في المناوبة:</label>
                        <input type="text" id="absence_in_shift">
                        <label for="units_notes">نقاط اسعافية مكشوفة:</label>
                        <input type="text" id="units_notes">
                        <label for="senior_paramedic_name">كبير المسعفين المناوب:</label>
                        <textarea id="senior_paramedic_name" rows="4"></textarea>
                    </div>
                    <button onclick="sendWhatsAppMessage('senior_paramedic_outside')">إرسال النموذج بالواتساب</button>
                `;
            }
            else if (formName === 'operational_failure') {
                formHTML = `
                    <h2>نموذج فشل تشغيلي</h2>
                    <div class="form-section">
                        <label for="sector">اختر القطاع:</label>
                        <select id="sector" onchange="toggleOtherSectorInput()">
                            <option value="الوسط">الوسط</option>
                            <option value="الجنوب">الجنوب</option>
                            <option value="الشرق">الشرق</option>
                            <option value="الغرب">الغرب</option>
                            <option value="الشمال">الشمال</option>
                            <option value="other">أخرى</option>
                        </select>
                        <input type="text" id="other_sector" placeholder="اكتب القطاع" style="display:none; margin-top: 10px;">

                        <label for="report_number">رقم البلاغ:</label>
                        <input type="text" id="report_number">

                        <label for="event_start">بداية الحدث (الساعة والدقيقة):</label>
                        <div class="input-row">
                            <input type="text" id="start_hour" placeholder="الساعة" style="width: 45px;">
                            <input type="text" id="start_minute" placeholder="الدقيقة" style="width: 45px;">
                        </div>

                        <label for="unit_failure">تعطل فرقة إسعافية:</label>
                        <input type="text" id="unit_failure">

                        <label for="failure_type">نوع العطل:</label>
                        <input type="text" id="failure_type">

                        <label for="report_type">نوع البلاغ:</label>
                        <input type="text" id="report_type">

                        <label for="damages">الأضرار:</label>
                        <textarea id="damages" rows="4"></textarea>

                        <label for="actions_taken">الإجراءات المتخذة:</label>
                        <textarea id="actions_taken" rows="4"></textarea>

                        <label for="service_impact">التأثير على الخدمة:</label>
                        <textarea id="service_impact" rows="4"></textarea>

                        <label for="event_end">نهاية الحدث (الساعة والدقيقة):</label>
                        <div class="input-row">
                            <input type="text" id="end_hour" placeholder="الساعة" style="width: 45px;">
                            <input type="text" id="end_minute" placeholder="الدقيقة" style="width: 45px;">
                        </div>
                    </div>
                    <button onclick="sendWhatsAppMessage('operational_failure')">إرسال النموذج بالواتساب</button>
                `;
            }
            else if (formName === 'eco_reports') {
                formHTML = `
                    <h2>نموذج بلاغات إيكو</h2>
                    <div class="form-section">
                        <label for="report_date">التاريخ:</label>
                        <input type="date" id="report_date" readonly>

                        <label for="report_time">توقيت التقرير (الساعة والدقيقة):</label>
                        <div class="input-row">
                            <input type="text" id="report_hour" placeholder="الساعة" style="width: 45px;">
                            <input type="text" id="report_minute" placeholder="الدقيقة" style="width: 45px;">
                        </div>

                        <label for="report_number">رقم البلاغ:</label>
                        <input type="text" id="report_number">

                        <label for="report_type">نوع البلاغ:</label>
                        <input type="text" id="report_type">

                        <label for="report_location">موقع البلاغ:</label>
                        <input type="text" id="report_location">

                        <label for="operational_sector">القطاع التشغيلي:</label>
                        <select id="operational_sector" required onchange="toggleOtherSectorInput()">
                            <option value="الوسط">الوسط</option>
                            <option value="الجنوب">الجنوب</option>
                            <option value="الشرق">الشرق</option>
                            <option value="الغرب">الغرب</option>
                            <option value="الشمال">الشمال</option>
                            <option value="other">أخرى</option>
                        </select>
                        <input type="text" id="other_operational_sector" placeholder="اكتب القطاع" style="display:none; margin-top: 10px;">

                        <label for="responding_units">الوحدات المستجيبة:</label>
                        <input type="text" id="responding_units">

                        <label for="response_time">زمن الاستجابة (دقائق):</label>
                        <input type="text" id="response_time">

                        <label for="notes">ملاحظات:</label>
                        <textarea id="notes" rows="4"></textarea>
                    </div>
                    <button onclick="sendWhatsAppMessage('eco_reports')">إرسال النموذج بالواتساب</button>
                `;
            }
            else if (formName === 'major_event') {
                formHTML = `
                    <h2>نموذج حدث جسيم</h2>
                    <div class="form-section">
                        <label for="sector">القطاع:</label>
                        <select id="sector" onchange="toggleOtherSectorInput()">
                            <option value="الوسط">الوسط</option>
                            <option value="الجنوب">الجنوب</option>
                            <option value="الشرق">الشرق</option>
                            <option value="الغرب">الغرب</option>
                            <option value="الشمال">الشمال</option>
                            <option value="other">أخرى</option>
                        </select>
                        <input type="text" id="other_sector" placeholder="اكتب القطاع" style="display:none; margin-top: 10px;">

                        <label for="event_time">وقت وتاريخ الحدث:</label>
                        <input type="date" id="event_time" readonly>
                        <div class="input-row">
                            <input type="text" id="event_hour" placeholder="الساعة" style="width: 45px;">
                            <input type="text" id="event_minute" placeholder="الدقيقة" style="width: 45px;">
                        </div>

                        <label for="event_details">تفاصيل الحدث:</label>
                        <textarea id="event_details" rows="4"></textarea>

                        <label for="assigned_units">إيجاز الوضع الراهن أثناء ورود البلاغ:</label>
                        <textarea id="assigned_units" rows="4"></textarea>

                        <label for="teams_count">عدد الفرق لكامل القطاع (المشغولة والمتاحة):</label>
                        <input type="text" id="teams_count">

                        <label for="deployment">الانتشار:</label>
                        <input type="text" id="deployment">

                        <label for="team_types">أنواع الفرق المشاركة:</label>
                        <input type="text" id="team_types">

                        <label for="saudi_red_crescent">الهلال الأحمر:</label>
                        <input type="text" id="saudi_red_crescent">

                        <label for="health_ministry">وزارة الصحة:</label>
                        <input type="text" id="health_ministry">

                        <label for="other_authorities">جهات أخرى:</label>
                        <input type="text" id="other_authorities">

                        <label for="injury_triage">فرز الإصابات:</label>
                        <div class="input-row">
                            <input type="text" id="critical_injuries" placeholder="حرجة" style="width: 45px;">
                            <input type="text" id="moderate_injuries" placeholder="متوسطة" style="width: 45px;">
                            <input type="text" id="minor_injuries" placeholder="طفيفة" style="width: 45px;">
                            <input type="text" id="deaths" placeholder="وفاة" style="width: 45px;">
                        </div>

                        <label for="nationalities">الجنسيات:</label>
                        <div class="input-row">
                            <input type="text" id="saudi_nationality" placeholder="سعودي" style="width: 45px;">
                            <input type="text" id="non_saudi_nationality" placeholder="غير سعودي" style="width: 45px;">
                            <input type="text" id="unknown_nationality" placeholder="غير معروف" style="width: 45px;">
                        </div>

                        <label for="children_count">عدد الأطفال:</label>
                        <input type="text" id="children_count">

                        <label for="central_operations_notification">إبلاغ العمليات المركزية:</label>
                        <div class="input-row">
                            <input type="checkbox" id="central_operations_yes"> نعم
                            <input type="checkbox" id="central_operations_no"> لا
                        </div>

                        <label for="joint_operations_notification">إبلاغ العمليات المشتركة:</label>
                        <div class="input-row">
                            <input type="checkbox" id="joint_operations_yes"> نعم
                            <input type="checkbox" id="joint_operations_no"> لا
                        </div>

                        <label for="event_end">انتهاء الحدث:</label>
                        <div class="input-row">
                            <input type="text" id="end_hour" placeholder="الساعة" style="width: 45px;">
                            <input type="text" id="end_minute" placeholder="الدقيقة" style="width: 45px;">
                        </div>

                        <h2>المسؤولين</h2>

                        <label for="field_leader">قائد الحدث الميداني:</label>
                        <input type="text" id="field_leader">

                        <label for="operational_control">التحكم العملياتي:</label>
                        <input type="text" id="operational_control">

                        <label for="response_coordination">تنسيق الاستجابة:</label>
                        <input type="text" id="response_coordination">

                        <label for="area_leader">قائد المنطقة المناوب:</label>
                        <input type="text" id="area_leader">
                    </div>
                    <button onclick="sendWhatsAppMessage('major_event')">إرسال النموذج بالواتساب</button>
                `;
            }
            else if (formName === 'support_request') {
                formHTML = `
                    <h2>طلب تفعيل خطة المساندة والدعم المتبادل</h2>
                    <div class="form-section">
                        <label for="sector">القطاع:</label>
                        <select id="sector" onchange="toggleOtherSectorInput()">
                            <option value="الوسط">الوسط</option>
                            <option value="الجنوب">الجنوب</option>
                            <option value="الشرق">الشرق</option>
                            <option value="الغرب">الغرب</option>
                            <option value="الشمال">الشمال</option>
                            <option value="other">أخرى</option>
                        </select>
                        <input type="text" id="other_sector" placeholder="اكتب القطاع" style="display:none; margin-top: 10px;">

                        <label for="report_time">توقيت طلب الدعم (الساعة والدقيقة):</label>
                        <div class="input-row">
                            <input type="text" id="report_hour" placeholder="الساعة" style="width: 45px;">
                            <input type="text" id="report_minute" placeholder="الدقيقة" style="width: 45px;">
                        </div>

                        <label for="units_linked">عدد الوحدات المرتبطة ببلاغ:</label>
                        <input type="text" id="units_linked">

                        <label for="units_ready">عدد الوحدات الجاهزة:</label>
                        <input type="text" id="units_ready">

                        <label for="units_out_of_order">عدد الوحدات الخارجة عن الجاهزية:</label>
                        <input type="text" id="units_out_of_order">

                        <label for="working_teams_shift">عدد فرق القطاع العاملة أثناء المناوبة:</label>
                        <input type="text" id="working_teams_shift">

                        <label for="challenges">التحديات والاجراءات المتخذة:</label>
                        <textarea id="challenges" rows="4" placeholder="1- ...&#10;2- ..."></textarea>

                        <label for="related_reports">في حال كان طلب الدعم مرتبط ببلاغات إسعافية:</label>
                        <div id="reports-container">
                            <div class="input-pair">
                                <input type="text" placeholder="رقم البلاغ" class="report-number" style="width: 120px;">
                                <select class="report-type" style="width: 120px;">
                                    <option value="إيكو">إيكو</option>
                                    <option value="دلتا">دلتا</option>
                                    <option value="تشارلي">تشارلي</option>
                                    <option value="برافو">برافو</option>
                                </select>
                            </div>
                        </div>
                        <button type="button" onclick="addReportField()">إضافة بلاغ آخر</button>

                        <label for="senior_paramedic_name">اسم كبير المسعفين:</label>
                        <input type="text" id="senior_paramedic_name">
                    </div>
                    <button onclick="sendWhatsAppMessage('support_request')">إرسال النموذج بالواتساب</button>
                `;
            }
            else if (formName === 'support_activation') {
                formHTML = `
                    <h2>نموذج قبول تفعيل خطة المساندة والدعم المتبادل</h2>
                    <div class="form-section">
                        <label for="support_status">حالة الدعم:</label>
                        <select id="support_status">
                            <option value="الموافقة">الموافقة</option>
                            <option value="الرفض">الرفض</option>
                        </select>

                        <label for="support_reasons">أسباب القبول أو الرفض:</label>
                        <textarea id="support_reasons" rows="4"></textarea>

                        <label for="support_sector">القطاع الداعم:</label>
                        <select id="support_sector" onchange="toggleOtherSectorInput()">
                            <option value="الوسط">الوسط</option>
                            <option value="الجنوب">الجنوب</option>
                            <option value="الشرق">الشرق</option>
                            <option value="الغرب">الغرب</option>
                            <option value="الشمال">الشمال</option>
                            <option value="other">أخرى</option>
                        </select>
                        <input type="text" id="other_support_sector" placeholder="اكتب القطاع" style="display:none; margin-top: 10px;">

                        <label for="supported_sector">القطاع المدعوم:</label>
                        <select id="supported_sector" onchange="toggleOtherSectorInput()">
                            <option value="الوسط">الوسط</option>
                            <option value="الجنوب">الجنوب</option>
                            <option value="الشرق">الشرق</option>
                            <option value="الغرب">الغرب</option>
                            <option value="الشمال">الشمال</option>
                            <option value="other">أخرى</option>
                        </select>
                        <input type="text" id="other_supported_sector" placeholder="اكتب القطاع" style="display:none; margin-top: 10px;">

                        <label for="dispatch_time">توقيت تحريك الدعم (الساعة والدقيقة):</label>
                        <div class="input-row">
                            <input type="text" id="dispatch_hour" placeholder="الساعة" style="width: 45px;">
                            <input type="text" id="dispatch_minute" placeholder="الدقيقة" style="width: 45px;">
                        </div>

                        <label for="arrival_time">توقيت وصول الدعم (الساعة والدقيقة):</label>
                        <div class="input-row">
                            <input type="text" id="arrival_hour" placeholder="الساعة" style="width: 45px;">
                            <input type="text" id="arrival_minute" placeholder="الدقيقة" style="width: 45px;">
                        </div>

                        <label for="support_teams_count">عدد الفرق الداعمة:</label>
                        <input type="text" id="support_teams_count">

                        <label for="end_time">توقيت انتهاء الدعم (الساعة والدقيقة):</label>
                        <div class="input-row">
                            <input type="text" id="end_hour" placeholder="الساعة" style="width: 45px;">
                            <input type="text" id="end_minute" placeholder="الدقيقة" style="width: 45px;">
                        </div>

                        <label for="region_leader_name">اسم قائد المنطقة:</label>
                        <input type="text" id="region_leader_name">
                    </div>
                    <button onclick="sendWhatsAppMessage('support_activation')">إرسال النموذج بالواتساب</button>
                `;
            }

            // إضافة بقية النماذج هنا بنفس الطريقة...

            formContainer.innerHTML = formHTML;

            updateDateTime(formName);
        }

        function updateDateTime(formName) {
            const today = new Date().toISOString().split('T')[0];

            const dateInputs = document.querySelectorAll("input[type='date']");
            dateInputs.forEach(input => {
                input.value = today;
            });
        }

        function addReportField() {
            const reportsContainer = document.getElementById('reports-container');
            const newField = `
                <div class="input-pair">
                    <input type="text" placeholder="رقم البلاغ" class="report-number" style="width: 120px;">
                    <select class="report-type" style="width: 120px;">
                        <option value="إيكو">إيكو</option>
                        <option value="دلتا">دلتا</option>
                        <option value="تشارلي">تشارلي</option>
                        <option value="برافو">برافو</option>
                    </select>
                </div>
            `;
            reportsContainer.insertAdjacentHTML('beforeend', newField);
        }

        function relatedreports() {
            const reportsContainer = document.getElementById('reports-container');
            const newField = `
                <div class="input-pair">
                    <input type="text" placeholder="رقم البلاغ" class="report-number" style="width: 120px;">
                    <select class="report-type" style="width: 120px;">
                        <option value="إيكو">إيكو</option>
                        <option value="دلتا">دلتا</option>
                        <option value="تشارلي">تشارلي</option>
                        <option value="برافو">برافو</option>
                    </select>
                    <input type="text" placeholder="زمن الاستجابة" class="waiting_time" style="width: 120px;">
                </div>
            `;
            reportsContainer.insertAdjacentHTML('beforeend', newField);
        }

        function saveForm(formName) {
            const xhr = new XMLHttpRequest();
            xhr.open('POST', `save_data.php?form=${formName}`, true);
            xhr.setRequestHeader('Content-Type', 'application/json');

            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    const response = JSON.parse(xhr.responseText);
                    if (response.status === 'success') {
                        copyForm(formName);
                        alert("تم إرسال النموذج بالواتساب بنجاح!");
                    } else {
                        alert("حدث خطأ: " + response.message);
                    }
                }
            };

            xhr.onerror = function () {
                alert("فشل الاتصال بالخادم. الرجاء المحاولة مرة أخرى.");
            };

            const data = getFormData(formName);

            // تحقق إذا كانت البيانات غير كاملة
            if (!data || Object.keys(data).length === 0) {
                alert("البيانات المدخلة غير صحيحة.");
                return;
            }

            xhr.send(JSON.stringify(data));
        }

        function getFormData(formName) {
            const data = {};

            if (formName === 'senior_paramedic') {
                data.sector = document.getElementById('sector')?.value || '';
                data.other_sector = document.getElementById('other_sector')?.value || '';
                data.date = document.getElementById('date')?.value || '';
                data.time = document.getElementById('time')?.value || '';
                data.working_teams = document.getElementById('working_teams')?.value || '';
                data.total_teams = document.getElementById('total_teams')?.value || '';
                data.rapid_response_teams = document.getElementById('rapid_response_teams')?.value || '';
                data.operating_vehicles = document.getElementById('operating_vehicles')?.value || '';
                data.broken_vehicles = document.getElementById('broken_vehicles')?.value || '';
                data.reserve_vehicles = document.getElementById('reserve_vehicles')?.value || '';
                data.open_logistics_reports = document.getElementById('open_logistics_reports')?.value || '';
                data.coordination_teams = document.getElementById('coordination_teams')?.value || '';
                data.logistics_support_teams = document.getElementById('logistics_support_teams')?.value || '';
                data.hospitals_out_of_service = document.getElementById('hospitals_out_of_service')?.value || '';
                data.eco_reports = document.getElementById('eco_reports')?.value || '';
                data.delta_reports = document.getElementById('delta_reports')?.value || '';
                data.charlie_reports = document.getElementById('charlie_reports')?.value || '';
                data.bravo_reports = document.getElementById('bravo_reports')?.value || '';
                data.alpha_reports = document.getElementById('alpha_reports')?.value || '';
                data.omega_reports = document.getElementById('omega_reports')?.value || '';
                data.catheter_reports = document.getElementById('catheter_reports')?.value || '';
                data.stroke_reports = document.getElementById('stroke_reports')?.value || '';
                data.total_reports = document.getElementById('total_reports')?.value || '';
                data.government_transfers = document.getElementById('government_transfers')?.value || '';
                data.private_transfers = document.getElementById('private_transfers')?.value || '';
                data.untransferred_cases = document.getElementById('untransferred_cases')?.value || '';
                data.paper_reports = document.getElementById('paper_reports')?.value || '';
                data.waiting_time = document.getElementById('waiting_time')?.value || '';
                data.top_team = document.getElementById('top_team')?.value || '';
                data.average_reports = document.getElementById('average_reports')?.value || '';
                data.response_rate = document.getElementById('response_rate')?.value || '';
                data.average_response_time = document.getElementById('average_response_time')?.value || '';
                data.response_time_to_intervention = document.getElementById('response_time_to_intervention')?.value || '';
                data.absence_in_shift = document.getElementById('absence_in_shift')?.value || '';
                data.cad_program_notes = document.getElementById('cad_program_notes')?.value || '';
            }
            // استمر في جمع بيانات النماذج الأخرى بنفس الطريقة...

            return data;
        }

        // أوامر نسخ النماذج من هنا تبدأ
        function sendWhatsAppMessage(formName) {
            let formText = '';

            if (formName === 'senior_paramedic') {
                formText += `=== نموذج كبار المسعفين ===\n\n`;
                if (document.getElementById('sector').value !== 'other') {
                    formText += `القطاع: ${document.getElementById('sector').value}\n`;
                } else {
                    formText += `القطاع: ${document.getElementById('other_sector').value}\n`;
                }
                formText += `التاريخ: ${document.getElementById('date').value}\n`;
                formText += `التوقيت الحالي: ${document.getElementById('time').value}\n`;
                formText += `عدد الفرق العاملة: ${document.getElementById('working_teams').value} من أصل: ${document.getElementById('total_teams').value}\n`;
                formText += `عدد فرق التدخل السريع: ${document.getElementById('rapid_response_teams').value}\n`;
                formText += `عدد المركبات العاملة: ${document.getElementById('operating_vehicles').value}\n`;
                formText += `عدد المركبات المتعطلة: ${document.getElementById('broken_vehicles').value}\n`;
                formText += `عدد المركبات الاحتياط: ${document.getElementById('reserve_vehicles').value}\n`;
                formText += `بلاغات الدعم اللوجستي المفتوحة: ${document.getElementById('open_logistics_reports').value}\n`;
                formText += `عدد العاملين في التنسيق والتحكم: ${document.getElementById('coordination_teams').value}\n`;
                formText += `عدد العاملين في الدعم اللوجستي: ${document.getElementById('logistics_support_teams').value}\n`;
                formText += `قائمة المستشفيات خارج الخدمة: ${document.getElementById('hospitals_out_of_service').value}\n`;
                formText += `\n=== الطلب ===\n`;
                formText += `عدد بلاغات إنعاش إيكو: ${document.getElementById('eco_reports').value}\n`;
                formText += `عدد بلاغات دلتا: ${document.getElementById('delta_reports').value}\n`;
                formText += `عدد بلاغات تشارلي: ${document.getElementById('charlie_reports').value}\n`;
                formText += `عدد بلاغات برافو: ${document.getElementById('bravo_reports').value}\n`;
                formText += `عدد بلاغات ألفا: ${document.getElementById('alpha_reports').value}\n`;
                formText += `عدد بلاغات أوميغا: ${document.getElementById('omega_reports').value}\n`;
                formText += `عدد بلاغات القسطرة: ${document.getElementById('catheter_reports').value}\n`;
                formText += `عدد بلاغات السكتة الدماغية: ${document.getElementById('stroke_reports').value}\n\n`;
                formText += `\n=== البلاغات ===\n`;
                formText += `إجمالي بلاغات القطاع: ${document.getElementById('total_reports').value}\n`;
                formText += `عدد الحالات المنقولة للقطاع الحكومي: ${document.getElementById('government_transfers').value}\n`;
                formText += `عدد الحالات المنقولة للقطاع الخاص: ${document.getElementById('private_transfers').value}\n`;
                formText += `عدد الحالات الغير منقولة: ${document.getElementById('untransferred_cases').value}\n`;
                formText += `عدد البلاغات المدونة ورقياً: ${document.getElementById('paper_reports').value}\n`;
                formText += `\n=== المخرجات ===\n`;
                formText += `متوسط زمن الانتظار في قائمة الترحيل: ${document.getElementById('waiting_time').value}\n`;
                formText += `اعلى فرقة اسعافيه في عدد البلاغات: ${document.getElementById('top_team').value}\n`;
                formText += `متوسط عدد البلاغات للفرق الاسعافية: ${document.getElementById('average_reports').value}\n`;
                formText += `نسبة زمن الاستجابة خلال 8 دقائق للبلاغات الساخنة: ${document.getElementById('response_rate').value}\n`;
                formText += `متوسط زمن الاستجابة لبلاغات الحوادث المرورية الساخنة: ${document.getElementById('average_response_time').value}\n`;
                formText += `زمن الاستجابة حتى المباشرة: ${document.getElementById('response_time_to_intervention').value}\n\n`;
                formText += `\n=== ملاحظات النوبة ===\n`;
                formText += `عدد الغياب في المناوبة: ${document.getElementById('absence_in_shift').value}\n`;
                formText += `ملاحظات برنامج الكاد: ${document.getElementById('cad_program_notes').value}\n`;
            }
            // ... (استمر في إضافة النصوص للنماذج الأخرى بنفس الطريقة)
            else if (formName === 'rapid_response_reports') {
                formText += `=== نموذج بلاغات التدخل السريع ===\n\n`;
                formText += `قطاع عمليات الغرب: ${document.getElementById('sector_west').value}\n`;
                formText += `قطاع عمليات الشرق: ${document.getElementById('sector_east').value}\n`;
                formText += `قطاع عمليات الوسط: ${document.getElementById('sector_central').value}\n`;
                formText += `قطاع عمليات الشمال: ${document.getElementById('sector_north').value}\n`;
                formText += `قطاع عمليات الجنوب: ${document.getElementById('sector_south').value}\n`;
            }
            // أضف باقي النماذج هنا...

            console.log(formText); // تأكيد عرض البيانات المجمعة
            const encodedText = encodeURIComponent(formText);
            const whatsappUrl = `https://wa.me/?text=${encodedText}`;

            // فتح الرابط في نافذة جديدة
            window.open(whatsappUrl, '_blank');
        }

        function showCopyNotification() {
            const notification = document.getElementById('copyNotification');
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        function toggleOtherSectorInput() {
            const sectorSelects = document.querySelectorAll('select');
            sectorSelects.forEach(select => {
                if (select.id.includes('sector')) {
                    const otherSectorInputId = select.id.includes('support') ? `other_${select.id}` : 'other_sector';
                    const otherSectorInput = document.getElementById(otherSectorInputId);
                    if (select.value === "other") {
                        otherSectorInput.style.display = "block";
                    } else {
                        otherSectorInput.style.display = "none";
                    }
                }
            });
        }

        function selectCurrentTime() {
            // الحصول على التوقيت الحالي حسب توقيت السعودية (UTC+3)
            const currentTime = new Date().toLocaleString("en-US", {timeZone: "Asia/Riyadh"});
            const hours = new Date(currentTime).getHours();

            let selectedOption = '';

            // تحديد الفترة الزمنية بناءً على الساعة الحالية
            if (hours >= 0 && hours < 6) {
                selectedOption = "0:00 إلى 6:00";
            } else if (hours >= 6 && hours < 12) {
                selectedOption = "6:00 إلى 12:00";
            } else if (hours >= 12 && hours < 18) {
                selectedOption = "12:00 إلى 18:00";
            } else if (hours >= 18 && hours < 24) {
                selectedOption = "18:00 إلى 0:00";
            }

            // العثور على جميع عناصر الـ select التي تحتوي على التوقيت
            const timeSelects = document.querySelectorAll('select[id="time"]');
            
            // تطبيق التوقيت المحدد على جميع النماذج
            timeSelects.forEach(function(timeSelect) {
                timeSelect.value = selectedOption;
            });
        }

        document.addEventListener("DOMContentLoaded", function () {
            loadForm('senior_paramedic'); // تحميل النموذج الافتراضي
            selectCurrentTime(); // تحديد التوقيت الحالي تلقائياً
        });
    </script>

</body>
</html>

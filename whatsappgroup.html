<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم الإسعاف</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f4f8;
            margin: 0;
            padding: 20px;
            direction: rtl;
        }
        .dashboard {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        .sidebar {
            background-color: #ffffff;
            padding: 20px;
            color: #333;
            text-align: center;
            transition: width 0.3s;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }
        .sidebar h1 {
            font-size: 24px;
            margin-bottom: 30px;
        }
        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }
        .sidebar ul li {
            margin-bottom: 15px;
        }
        .sidebar ul li a {
            display: flex;
            align-items: center;
            padding: 12px;
            color: #333;
            text-decoration: none;
            background-color: #ecf0f1;
            border-radius: 8px;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        .sidebar ul li a:hover {
            background-color: #bdc3c7;
        }
        .sidebar ul li a i {
            margin-left: 10px;
        }
        .container {
            flex: 1;
            padding: 30px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }
        h2 {
            color: #3498db;
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }
        label {
            margin-top: 10px;
            display: block;
            color: #333;
            font-weight: bold;
            font-size: 15px;
        }
        input[type="text"], input[type="date"], input[type="time"], input[type="datetime-local"], textarea, select {
            width: 100%;
            padding: 10px;
            margin: 5px 0 15px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        input[type="text"]:focus, input[type="date"]:focus, input[type="time"]:focus {
            border-color: #3498db;
            outline: none;
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #3498db;
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #1d6a9c;
        }
        .copy-notification {
            display: none;
            text-align: center;
            color: green;
            font-size: 14px;
            margin-top: 15px;
        }
        .form-section {
            margin-bottom: 30px;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Responsive design */
        @media (min-width: 768px) {
            .dashboard {
                flex-direction: row;
            }
            .sidebar {
                width: 250px;
                text-align: left;
            }
            .container {
                margin-left: 10px;
            }
        }
    </style>
</head>
<body>

<div class="dashboard">
    <!-- الشريط الجانبي -->
    <div class="sidebar">
        <h1>لوحة التحكم</h1>
        <ul>
            <li><a href="#" onclick="loadForm('senior_paramedic')"><i class="fas fa-user-md"></i> نموذج كبار المسعفين</a></li>
            <li><a href="#" onclick="loadForm('operational_failure')"><i class="fas fa-exclamation-triangle"></i> نموذج فشل تشغيلي</a></li>
            <li><a href="#" onclick="loadForm('eco_reports')"><i class="fas fa-file-alt"></i> نموذج بلاغات إيكو</a></li>
            <li><a href="#" onclick="loadForm('major_event')"><i class="fas fa-calendar-alt"></i> نموذج حدث جسيم</a></li>
        </ul>
    </div>

    <!-- المحتوى الرئيسي -->
    <div class="container" id="form-container">
        <!-- النموذج الحالي يظهر هنا -->
    </div>
</div>

<div class="copy-notification" id="copyNotification">
    تم النسخ بنجاح! يمكنك الآن إرسالها في قروب القيادات.
</div>

<!-- إشعار في حالة حدوث خطأ أثناء النسخ -->
<div class="copy-notification" id="copyError" style="display: none; color: red;">
    نأسف، وظيفة النسخ غير مدعومة على هذا الجهاز. يرجى نسخ البيانات يدويًا.
</div>

<!-- تضمين مكتبة Clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.10/clipboard.min.js"></script>

<script>
    function loadForm(formName) {
        const formContainer = document.getElementById('form-container');
        let formHTML = '';

        // بناء النموذج
        if (formName === 'senior_paramedic') {
            formHTML = `
                <h2>نموذج كبار المسعفين</h2>
                <div class="form-section">
                    <label for="sector">اختر القطاع:</label>
                    <select id="sector" required>
                        <option value="الوسط">الوسط</option>
                        <option value="الجنوب">الجنوب</option>
                        <option value="الشرق">الشرق</option>
                        <option value="الغرب">الغرب</option>
                        <option value="الشمال">الشمال</option>
                    </select>

                    <label for="date">التاريخ:</label>
                    <input type="date" id="date" readonly>

                    <label for="time">التوقيت الحالي:</label>
                    <select id="time">
                        <option value="0:00 إلى 6:00">0:00 إلى 6:00</option>
                        <option value="6:00 إلى 12:00">6:00 إلى 12:00</option>
                        <option value="12:00 إلى 18:00">12:00 إلى 18:00</option>
                        <option value="18:00 إلى 0:00">18:00 إلى 0:00</option>
                    </select>

                    <div class="input-pair">
                        <div class="input-small">
                            <label for="working_teams">عدد الفرق العاملة:</label>
                            <input type="text" id="working_teams" style="width: 80px;">
                        </div>
                        <div class="input-small">
                            <label for="total_teams">من أصل:</label>
                            <input type="text" id="total_teams" style="width: 80px;">
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="input-small">
                            <label for="rapid_response_teams">عدد فرق التدخل السريع:</label>
                            <input type="text" id="rapid_response_teams">
                        </div>
                        <div class="input-small">
                            <label for="operating_vehicles">عدد المركبات العاملة:</label>
                            <input type="text" id="operating_vehicles">
                        </div>
                        <div class="input-small">
                            <label for="broken_vehicles">عدد المركبات المتعطلة:</label>
                            <input type="text" id="broken_vehicles">
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="input-small">
                            <label for="open_logistics_reports">بلاغات الدعم اللوجستي المفتوحة:</label>
                            <input type="text" id="open_logistics_reports">
                        </div>
                        <div class="input-small">
                            <label for="coordination_teams">عدد العاملين في التنسيق والتحكم:</label>
                            <input type="text" id="coordination_teams">
                        </div>
                        <div class="input-small">
                            <label for="logistics_support_teams">عدد العاملين في الدعم اللوجستي:</label>
                            <input type="text" id="logistics_support_teams">
                        </div>
                    </div>

                    <label for="hospitals_out_of_service">قائمة المستشفيات خارج الخدمة:</label>
                    <input type="text" id="hospitals_out_of_service">

                    <h2>الطلب</h2>

                    <div class="input-row">
                        <div class="input-small">
                            <label for="eco_reports">عدد بلاغات إنعاش إيكو:</label>
                            <input type="text" id="eco_reports">
                        </div>
                        <div class="input-small">
                            <label for="delta_reports">عدد بلاغات دلتا:</label>
                            <input type="text" id="delta_reports">
                        </div>
                        <div class="input-small">
                            <label for="charlie_reports">عدد بلاغات تشارلي:</label>
                            <input type="text" id="charlie_reports">
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="input-small">
                            <label for="bravo_reports">عدد بلاغات برافو:</label>
                            <input type="text" id="bravo_reports">
                        </div>
                        <div class="input-small">
                            <label for="alpha_reports">عدد بلاغات ألفا:</label>
                            <input type="text" id="alpha_reports">
                        </div>
                        <div class="input-small">
                            <label for="omega_reports">عدد بلاغات أوميغا:</label>
                            <input type="text" id="omega_reports">
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="input-small">
                            <label for="catheter_reports">عدد بلاغات القسطرة:</label>
                            <input type="text" id="catheter_reports">
                        </div>
                        <div class="input-small">
                            <label for="stroke_reports">عدد بلاغات السكتة الدماغية:</label>
                            <input type="text" id="stroke_reports">
                        </div>
                    </div>

                    <h2>البلاغات</h2>

                    <label for="total_reports">إجمالي بلاغات القطاع:</label>
                    <input type="text" id="total_reports">

                    <div class="input-row">
                        <div class="input-small">
                            <label for="government_transfers">عدد الحالات المنقولة للقطاع الحكومي:</label>
                            <input type="text" id="government_transfers">
                        </div>
                        <div class="input-small">
                            <label for="private_transfers">عدد الحالات المنقولة للقطاع الخاص:</label>
                            <input type="text" id="private_transfers">
                        </div>
                        <div class="input-small">
                            <label for="untransferred_cases">عدد الحالات الغير منقولة:</label>
                            <input type="text" id="untransferred_cases">
                        </div>
                    </div>

                    <label for="paper_reports">عدد البلاغات المدونة ورقياً:</label>
                    <input type="text" id="paper_reports">

                    <h2>المخرجات</h2>

                    <label for="waiting_time">متوسط زمن الانتظار في قائمة الترحيل:</label>
                    <input type="text" id="waiting_time">

                    <div class="input-row">
                        <div class="input-small">
                            <label for="top_team">اعلى فرقة اسعافيه في عدد البلاغات:</label>
                            <input type="text" id="top_team">
                        </div>
                        <div class="input-small">
                            <label for="average_reports">متوسط عدد البلاغات للفرق الاسعافية:</label>
                            <input type="text" id="average_reports">
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="input-small">
                            <label for="response_rate">نسبة زمن الاستجابة خلال 8 دقائق للبلاغات الساخنة:</label>
                            <input type="text" id="response_rate">
                        </div>
                        <div class="input-small">
                            <label for="average_response_time">متوسط زمن الاستجابة لبلاغات الحوادث المرورية الساخنة:</label>
                            <input type="text" id="average_response_time">
                        </div>
                        <div class="input-small">
                            <label for="response_time_to_intervention">زمن الاستجابة حتى المباشرة:</label>
                            <input type="text" id="response_time_to_intervention">
                        </div>
                    </div>

                    <h2>ملاحظات النوبة</h2>

                    <label for="absence_in_shift">عدد الغياب في المناوبة:</label>
                    <input type="text" id="absence_in_shift">

                    <label for="cad_program_notes">ملاحظات برنامج الكاد:</label>
                    <textarea id="cad_program_notes" rows="4"></textarea>
                </div>
                <button id="copyButton" data-clipboard-text="" onclick="saveForm('senior_paramedic')">حفظ البيانات</button>
            `;
        } else if (formName === 'eco_reports') {
            formHTML = `
                <h2>نموذج بلاغات إيكو</h2>
                <div class="form-section">
                    <label for="report_date">التاريخ:</label>
                    <input type="date" id="report_date" readonly>

                    <label for="report_time">توقيت التقرير (الساعة والدقيقة):</label>
                    <div class="input-row">
                        <input type="text" id="report_hour" placeholder="الساعة" style="width: 45px;">
                        <input type="text" id="report_minute" placeholder="الدقيقة" style="width: 45px;">
                    </div>

                    <label for="report_number">رقم البلاغ:</label>
                    <input type="text" id="report_number">

                    <label for="report_type">نوع البلاغ:</label>
                    <input type="text" id="report_type">

                    <label for="report_location">موقع البلاغ:</label>
                    <input type="text" id="report_location">

                        <label for="operational_sector">القطاع التشغيلي:</label>
					<select id="operational_sector" required>
						<option value="الوسط">الوسط</option>
						<option value="الجنوب">الجنوب</option>
						<option value="الشرق">الشرق</option>
						<option value="الغرب">الغرب</option>
						<option value="الشمال">الشمال</option>
					</select>

                    <label for="responding_units">الوحدات المستجيبة:</label>
                    <input type="text" id="responding_units">

                    <label for="response_time">زمن الاستجابة (دقائق):</label>
                    <input type="text" id="response_time">

                    <label for="notes">ملاحظات:</label>
                    <textarea id="notes" rows="4"></textarea>
                </div>
                <button id="copyButton" data-clipboard-text="" onclick="saveForm('eco_reports')">حفظ البيانات</button>
            `;
        } else if (formName === 'major_event') {
            formHTML = `
                <h2>نموذج حدث جسيم</h2>
                <div class="form-section">
                    <label for="sector">القطاع:</label>
                    <select id="sector" onchange="toggleOtherSectorInput()">
                        <option value="الوسط">الوسط</option>
                        <option value="الجنوب">الجنوب</option>
                        <option value="الشرق">الشرق</option>
                        <option value="الغرب">الغرب</option>
                        <option value="الشمال">الشمال</option>
                        <option value="other">أخرى</option>
                    </select>
                    <input type="text" id="other_sector" placeholder="اكتب القطاع" style="display:none; margin-top: 10px;">

                    <label for="event_time">وقت وتاريخ الحدث:</label>
                    <input type="date" id="event_time" readonly>
                    <div class="input-row">
                        <input type="text" id="event_hour" placeholder="الساعة" style="width: 45px;">
                        <input type="text" id="event_minute" placeholder="الدقيقة" style="width: 45px;">
                    </div>

                    <label for="event_details">تفاصيل الحدث:</label>
                    <textarea id="event_details" rows="4"></textarea>

                    <label for="assigned_units">إيجاز الوضع الراهن أثناء ورود البلاغ:</label>
                    <textarea id="assigned_units" rows="4"></textarea>

                    <label for="teams_count">عدد الفرق لكامل القطاع (المشغولة والمتاحة):</label>
                    <input type="text" id="teams_count">

                    <label for="deployment">الانتشار:</label>
                    <input type="text" id="deployment">

                    <label for="team_types">أنواع الفرق المشاركة:</label>
                    <input type="text" id="team_types">

                    <label for="saudi_red_crescent">الهلال الأحمر:</label>
                    <input type="text" id="saudi_red_crescent">

                    <label for="health_ministry">وزارة الصحة:</label>
                    <input type="text" id="health_ministry">

                    <label for="other_authorities">جهات أخرى:</label>
                    <input type="text" id="other_authorities">

                    <label for="injury_triage">فرز الإصابات:</label>
                    <div class="input-row">
                        <input type="text" id="critical_injuries" placeholder="حرجة" style="width: 45px;">
                        <input type="text" id="moderate_injuries" placeholder="متوسطة" style="width: 45px;">
                        <input type="text" id="minor_injuries" placeholder="طفيفة" style="width: 45px;">
                        <input type="text" id="deaths" placeholder="وفاة" style="width: 45px;">
                    </div>

                    <label for="nationalities">الجنسيات:</label>
                    <div class="input-row">
                        <input type="text" id="saudi_nationality" placeholder="سعودي" style="width: 45px;">
                        <input type="text" id="non_saudi_nationality" placeholder="غير سعودي" style="width: 45px;">
                        <input type="text" id="unknown_nationality" placeholder="غير معروف" style="width: 45px;">
                    </div>

                    <label for="children_count">عدد الأطفال:</label>
                    <input type="text" id="children_count">

                    <label for="central_operations_notification">إبلاغ العمليات المركزية:</label>
                    <input type="checkbox" id="central_operations_yes"> نعم
                    <input type="checkbox" id="central_operations_no"> لا

                    <label for="joint_operations_notification">إبلاغ العمليات المشتركة:</label>
                    <input type="checkbox" id="joint_operations_yes"> نعم
                    <input type="checkbox" id="joint_operations_no"> لا

                    <label for="event_end">انتهاء الحدث:</label>
                    <div class="input-row">
                        <input type="text" id="end_hour" placeholder="الساعة" style="width: 45px;">
                        <input type="text" id="end_minute" placeholder="الدقيقة" style="width: 45px;">
                    </div>

                    <h2>المسؤولين</h2>

                    <label for="field_leader">قائد الحدث الميداني:</label>
                    <input type="text" id="field_leader">

                    <label for="operational_control">التحكم العملياتي:</label>
                    <input type="text" id="operational_control">

                    <label for="response_coordination">تنسيق الاستجابة:</label>
                    <input type="text" id="response_coordination">

                    <label for="area_leader">قائد المنطقة المناوب:</label>
                    <input type="text" id="area_leader">
                </div>
                <button id="copyButton" data-clipboard-text="" onclick="saveForm('major_event')">حفظ البيانات</button>
            `;
        } else if (formName === 'operational_failure') {
            formHTML = `
                <h2>نموذج فشل تشغيلي</h2>
                <div class="form-section">
                    <label for="sector">اختر القطاع:</label>
                    <select id="sector">
                        <option value="الوسط">الوسط</option>
                        <option value="الجنوب">الجنوب</option>
                        <option value="الشرق">الشرق</option>
                        <option value="الغرب">الغرب</option>
                        <option value="الشمال">الشمال</option>
                    </select>

                    <label for="report_number">رقم البلاغ:</label>
                    <input type="text" id="report_number">

                    <label for="event_start">بداية الحدث (الساعة والدقيقة):</label>
                    <div class="input-row">
                        <input type="text" id="start_hour" placeholder="الساعة" style="width: 45px;">
                        <input type="text" id="start_minute" placeholder="الدقيقة" style="width: 45px;">
                    </div>

                    <label for="unit_failure">تعطل فرقة إسعافية:</label>
                    <input type="text" id="unit_failure">

                    <label for="failure_type">نوع العطل:</label>
                    <input type="text" id="failure_type">

                    <label for="report_type">نوع البلاغ:</label>
                    <input type="text" id="report_type">

                    <label for="damages">الأضرار:</label>
                    <textarea id="damages" rows="4"></textarea>

                    <label for="actions_taken">الإجراءات المتخذة:</label>
                    <textarea id="actions_taken" rows="4"></textarea>

                    <label for="service_impact">التأثير على الخدمة:</label>
                    <textarea id="service_impact" rows="4"></textarea>

                    <label for="event_end">نهاية الحدث (الساعة والدقيقة):</label>
                    <div class="input-row">
                        <input type="text" id="end_hour" placeholder="الساعة" style="width: 45px;">
                        <input type="text" id="end_minute" placeholder="الدقيقة" style="width: 45px;">
                    </div>
                </div>
                <button id="copyButton" data-clipboard-text="" onclick="saveForm('operational_failure')">حفظ البيانات</button>
            `;
        }

        formContainer.innerHTML = formHTML;

        // تحديث التاريخ والتوقيت
        updateDateTime(formName);

        // تهيئة Clipboard.js للزر الجديد
        initializeClipboard(formName);
    }

    function updateDateTime(formName) {
        const today = new Date().toISOString().split('T')[0];

        if (formName === 'senior_paramedic') {
            const dateInput = document.getElementById("date");
            if (dateInput) {
                dateInput.value = today;
            }

            const timeSelect = document.getElementById("time");
            if (timeSelect) {
                const now = new Date();
                const saudiHours = (now.getUTCHours() + 3) % 24;
                if (saudiHours >= 0 && saudiHours < 6) {
                    timeSelect.value = "0:00 إلى 6:00";
                } else if (saudiHours >= 6 && saudiHours < 12) {
                    timeSelect.value = "6:00 إلى 12:00";
                } else if (saudiHours >= 12 && saudiHours < 18) {
                    timeSelect.value = "12:00 إلى 18:00";
                } else {
                    timeSelect.value = "18:00 إلى 0:00";
                }
            }
        }

        if (formName === 'eco_reports') {
            const reportDateInput = document.getElementById("report_date");
            if (reportDateInput) {
                reportDateInput.value = today;
            }
        }

        if (formName === 'major_event') {
            const eventDateInput = document.getElementById("event_time");
            if (eventDateInput) {
                eventDateInput.value = today;
            }
        }
    }

    function toggleOtherSectorInput() {
        const sectorSelect = document.getElementById("sector");
        const otherSectorInput = document.getElementById("other_sector");
        if (sectorSelect.value === "other") {
            otherSectorInput.style.display = "block";
        } else {
            otherSectorInput.style.display = "none";
        }
    }

    function saveForm(formName) {
        const data = {};

        // جمع البيانات من الحقول الخاصة بكل نموذج
        if (formName === 'senior_paramedic') {
            data.sector = document.getElementById('sector')?.value || '';
            data.date = document.getElementById('date')?.value || '';
            data.time = document.getElementById('time')?.value || '';
            data.working_teams = document.getElementById('working_teams')?.value || '';
            data.total_teams = document.getElementById('total_teams')?.value || '';
            data.rapid_response_teams = document.getElementById('rapid_response_teams')?.value || '';
            data.operating_vehicles = document.getElementById('operating_vehicles')?.value || '';
            data.broken_vehicles = document.getElementById('broken_vehicles')?.value || '';
            data.open_logistics_reports = document.getElementById('open_logistics_reports')?.value || '';
            data.coordination_teams = document.getElementById('coordination_teams')?.value || '';
            data.logistics_support_teams = document.getElementById('logistics_support_teams')?.value || '';
            data.hospitals_out_of_service = document.getElementById('hospitals_out_of_service')?.value || '';
            data.eco_reports = document.getElementById('eco_reports')?.value || '';
            data.delta_reports = document.getElementById('delta_reports')?.value || '';
            data.charlie_reports = document.getElementById('charlie_reports')?.value || '';
            data.bravo_reports = document.getElementById('bravo_reports')?.value || '';
            data.alpha_reports = document.getElementById('alpha_reports')?.value || '';
            data.omega_reports = document.getElementById('omega_reports')?.value || '';
            data.catheter_reports = document.getElementById('catheter_reports')?.value || '';
            data.stroke_reports = document.getElementById('stroke_reports')?.value || '';
            data.total_reports = document.getElementById('total_reports')?.value || '';
            data.government_transfers = document.getElementById('government_transfers')?.value || '';
            data.private_transfers = document.getElementById('private_transfers')?.value || '';
            data.untransferred_cases = document.getElementById('untransferred_cases')?.value || '';
            data.paper_reports = document.getElementById('paper_reports')?.value || '';
            data.waiting_time = document.getElementById('waiting_time')?.value || '';
            data.top_team = document.getElementById('top_team')?.value || '';
            data.average_reports = document.getElementById('average_reports')?.value || '';
            data.response_rate = document.getElementById('response_rate')?.value || '';
            data.average_response_time = document.getElementById('average_response_time')?.value || '';
            data.response_time_to_intervention = document.getElementById('response_time_to_intervention')?.value || '';
            data.absence_in_shift = document.getElementById('absence_in_shift')?.value || '';
            data.cad_program_notes = document.getElementById('cad_program_notes')?.value || '';
        } else if (formName === 'eco_reports') {
            data.report_date = document.getElementById('report_date')?.value || '';
            data.report_hour = document.getElementById('report_hour')?.value || '';
            data.report_minute = document.getElementById('report_minute')?.value || '';
            data.report_number = document.getElementById('report_number')?.value || '';
            data.report_type = document.getElementById('report_type')?.value || '';
            data.report_location = document.getElementById('report_location')?.value || '';
            data.operational_sector = document.getElementById('operational_sector')?.value || '';
            data.responding_units = document.getElementById('responding_units')?.value || '';
            data.response_time = document.getElementById('response_time')?.value || '';
            data.notes = document.getElementById('notes')?.value || '';
        } else if (formName === 'major_event') {
            data.sector = document.getElementById('sector')?.value || '';
            data.other_sector = document.getElementById('other_sector')?.value || '';
            data.event_time = document.getElementById('event_time')?.value || '';
            data.event_hour = document.getElementById('event_hour')?.value || '';
            data.event_minute = document.getElementById('event_minute')?.value || '';
            data.event_details = document.getElementById('event_details')?.value || '';
            data.assigned_units = document.getElementById('assigned_units')?.value || '';
            data.teams_count = document.getElementById('teams_count')?.value || '';
            data.deployment = document.getElementById('deployment')?.value || '';
            data.team_types = document.getElementById('team_types')?.value || '';
            data.saudi_red_crescent = document.getElementById('saudi_red_crescent')?.value || '';
            data.health_ministry = document.getElementById('health_ministry')?.value || '';
            data.other_authorities = document.getElementById('other_authorities')?.value || '';
            data.critical_injuries = document.getElementById('critical_injuries')?.value || '';
            data.moderate_injuries = document.getElementById('moderate_injuries')?.value || '';
            data.minor_injuries = document.getElementById('minor_injuries')?.value || '';
            data.deaths = document.getElementById('deaths')?.value || '';
            data.saudi_nationality = document.getElementById('saudi_nationality')?.value || '';
            data.non_saudi_nationality = document.getElementById('non_saudi_nationality')?.value || '';
            data.unknown_nationality = document.getElementById('unknown_nationality')?.value || '';
            data.children_count = document.getElementById('children_count')?.value || '';
            data.central_operations_yes = document.getElementById('central_operations_yes').checked;
            data.central_operations_no = document.getElementById('central_operations_no').checked;
            data.joint_operations_yes = document.getElementById('joint_operations_yes').checked;
            data.joint_operations_no = document.getElementById('joint_operations_no').checked;
            data.end_hour = document.getElementById('end_hour')?.value || '';
            data.end_minute = document.getElementById('end_minute')?.value || '';
            data.field_leader = document.getElementById('field_leader')?.value || '';
            data.operational_control = document.getElementById('operational_control')?.value || '';
            data.response_coordination = document.getElementById('response_coordination')?.value || '';
            data.area_leader = document.getElementById('area_leader')?.value || '';
        } else if (formName === 'operational_failure') {
            data.sector = document.getElementById('sector')?.value || '';
            data.report_number = document.getElementById('report_number')?.value || '';
            data.start_hour = document.getElementById('start_hour')?.value || '';
            data.start_minute = document.getElementById('start_minute')?.value || '';
            data.unit_failure = document.getElementById('unit_failure')?.value || '';
            data.failure_type = document.getElementById('failure_type')?.value || '';
            data.report_type = document.getElementById('report_type')?.value || '';
            data.damages = document.getElementById('damages')?.value || '';
            data.actions_taken = document.getElementById('actions_taken')?.value || '';
            data.service_impact = document.getElementById('service_impact')?.value || '';
            data.end_hour = document.getElementById('end_hour')?.value || '';
            data.end_minute = document.getElementById('end_minute')?.value || '';
        }

        // إرسال البيانات إلى ملف PHP
        fetch(`save_data.php?form=${formName}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
        .then(response => response.json())
        .then(data => {
            console.log('Success:', data);
            // نسخ النموذج إلى الحافظة باستخدام Clipboard.js
            copyForm(formName);
        })
        .catch((error) => {
            console.error('Error:', error);
        });
    }

    function copyForm(formName) {
        // جمع النص الذي تريد نسخه
        let formText = '';
        
        if (formName === 'senior_paramedic') {
            formText += `القطاع: ${document.getElementById('sector').value || ''}\n`;
            formText += `التاريخ: ${document.getElementById('date').value || ''}\n`;
            formText += `التوقيت الحالي: ${document.getElementById('time').value || ''}\n`;
            formText += `عدد الفرق العاملة: ${document.getElementById('working_teams').value || ''} من أصل: ${document.getElementById('total_teams').value || ''}\n`;
            formText += `عدد فرق التدخل السريع: ${document.getElementById('rapid_response_teams').value || ''}\n`;
            formText += `عدد المركبات العاملة: ${document.getElementById('operating_vehicles').value || ''}\n`;
            formText += `عدد المركبات المتعطلة: ${document.getElementById('broken_vehicles').value || ''}\n`;
            formText += `بلاغات الدعم اللوجستي المفتوحة: ${document.getElementById('open_logistics_reports').value || ''}\n`;
            formText += `عدد العاملين في التنسيق والتحكم: ${document.getElementById('coordination_teams').value || ''}\n`;
            formText += `عدد العاملين في الدعم اللوجستي: ${document.getElementById('logistics_support_teams').value || ''}\n`;
            formText += `قائمة المستشفيات خارج الخدمة: ${document.getElementById('hospitals_out_of_service').value || ''}\n\n`;
            formText += `الطلب:\n`;
            formText += `عدد بلاغات إنعاش إيكو: ${document.getElementById('eco_reports').value || ''}\n`;
            formText += `عدد بلاغات دلتا: ${document.getElementById('delta_reports').value || ''}\n`;
            formText += `عدد بلاغات تشارلي: ${document.getElementById('charlie_reports').value || ''}\n`;
            formText += `عدد بلاغات برافو: ${document.getElementById('bravo_reports').value || ''}\n`;
            formText += `عدد بلاغات ألفا: ${document.getElementById('alpha_reports').value || ''}\n`;
            formText += `عدد بلاغات أوميغا: ${document.getElementById('omega_reports').value || ''}\n`;
            formText += `عدد بلاغات القسطرة: ${document.getElementById('catheter_reports').value || ''}\n`;
            formText += `عدد بلاغات السكتة الدماغية: ${document.getElementById('stroke_reports').value || ''}\n\n`;
            formText += `البلاغات:\n`;
            formText += `إجمالي بلاغات القطاع: ${document.getElementById('total_reports').value || ''}\n`;
            formText += `عدد الحالات المنقولة للقطاع الحكومي: ${document.getElementById('government_transfers').value || ''}\n`;
            formText += `عدد الحالات المنقولة للقطاع الخاص: ${document.getElementById('private_transfers').value || ''}\n`;
            formText += `عدد الحالات الغير منقولة: ${document.getElementById('untransferred_cases').value || ''}\n`;
            formText += `عدد البلاغات المدونة ورقياً: ${document.getElementById('paper_reports').value || ''}\n\n`;
            formText += `المخرجات:\n`;
            formText += `متوسط زمن الانتظار في قائمة الترحيل: ${document.getElementById('waiting_time').value || ''}\n`;
            formText += `اعلى فرقة اسعافيه في عدد البلاغات: ${document.getElementById('top_team').value || ''}\n`;
            formText += `متوسط عدد البلاغات للفرق الاسعافية: ${document.getElementById('average_reports').value || ''}\n`;
            formText += `نسبة زمن الاستجابة خلال 8 دقائق للبلاغات الساخنة: ${document.getElementById('response_rate').value || ''}\n`;
            formText += `متوسط زمن الاستجابة لبلاغات الحوادث المرورية الساخنة: ${document.getElementById('average_response_time').value || ''}\n`;
            formText += `زمن الاستجابة حتى المباشرة: ${document.getElementById('response_time_to_intervention').value || ''}\n\n`;
            formText += `ملاحظات النوبة:\n`;
            formText += `عدد الغياب في المناوبة: ${document.getElementById('absence_in_shift').value || ''}\n`;
            formText += `ملاحظات برنامج الكاد: ${document.getElementById('cad_program_notes').value || ''}\n`;
        } else if (formName === 'eco_reports') {
            formText += `التاريخ: ${document.getElementById('report_date').value || ''}\n`;
            formText += `توقيت التقرير: ${document.getElementById('report_hour').value || ''}:${document.getElementById('report_minute').value || ''}\n`;
            formText += `رقم البلاغ: ${document.getElementById('report_number').value || ''}\n`;
            formText += `نوع البلاغ: ${document.getElementById('report_type').value || ''}\n`;
            formText += `موقع البلاغ: ${document.getElementById('report_location').value || ''}\n`;
            formText += `القطاع التشغيلي: ${document.getElementById('operational_sector').value || ''}\n`;
            formText += `الوحدات المستجيبة: ${document.getElementById('responding_units').value || ''}\n`;
            formText += `زمن الاستجابة: ${document.getElementById('response_time').value || ''}\n`;
            formText += `ملاحظات: ${document.getElementById('notes').value || ''}\n`;
        } else if (formName === 'major_event') {
            formText += `القطاع: ${document.getElementById('sector').value || ''}\n`;
            if (document.getElementById('sector').value === 'other') {
                formText += `القطاع الآخر: ${document.getElementById('other_sector').value || ''}\n`;
            }
            formText += `وقت وتاريخ الحدث: ${document.getElementById('event_time').value || ''} ${document.getElementById('event_hour').value || ''}:${document.getElementById('event_minute').value || ''}\n`;
            formText += `تفاصيل الحدث: ${document.getElementById('event_details').value || ''}\n`;
            formText += `إيجاز الوضع الراهن أثناء ورود البلاغ: ${document.getElementById('assigned_units').value || ''}\n`;
            formText += `عدد الفرق لكامل القطاع (المشغولة والمتاحة): ${document.getElementById('teams_count').value || ''}\n`;
            formText += `الانتشار: ${document.getElementById('deployment').value || ''}\n`;
            formText += `أنواع الفرق المشاركة: ${document.getElementById('team_types').value || ''}\n`;
            formText += `الهلال الأحمر: ${document.getElementById('saudi_red_crescent').value || ''}\n`;
            formText += `وزارة الصحة: ${document.getElementById('health_ministry').value || ''}\n`;
            formText += `جهات أخرى: ${document.getElementById('other_authorities').value || ''}\n`;
            formText += `فرز الإصابات:\n حرجة: ${document.getElementById('critical_injuries').value || ''}\n`;
            formText += `متوسطة: ${document.getElementById('moderate_injuries').value || ''}\n`;
            formText += `طفيفة: ${document.getElementById('minor_injuries').value || ''}\n`;
            formText += `وفيات: ${document.getElementById('deaths').value || ''}\n`;
            formText += `الجنسيات:\n سعودي: ${document.getElementById('saudi_nationality').value || ''}\n`;
            formText += `غير سعودي: ${document.getElementById('non_saudi_nationality').value || ''}\n`;
            formText += `غير معروف: ${document.getElementById('unknown_nationality').value || ''}\n`;
            formText += `عدد الأطفال: ${document.getElementById('children_count').value || ''}\n`;
            formText += `إبلاغ العمليات المركزية: ${document.getElementById('central_operations_yes').checked ? 'نعم' : 'لا'}\n`;
            formText += `إبلاغ العمليات المشتركة: ${document.getElementById('joint_operations_yes').checked ? 'نعم' : 'لا'}\n`;
            formText += `انتهاء الحدث: ${document.getElementById('end_hour').value || ''}:${document.getElementById('end_minute').value || ''}\n`;
            formText += `قائد الحدث الميداني: ${document.getElementById('field_leader').value || ''}\n`;
            formText += `التحكم العملياتي: ${document.getElementById('operational_control').value || ''}\n`;
            formText += `تنسيق الاستجابة: ${document.getElementById('response_coordination').value || ''}\n`;
            formText += `قائد المنطقة المناوب: ${document.getElementById('area_leader').value || ''}\n`;
        } else if (formName === 'operational_failure') {
            formText += `القطاع: ${document.getElementById('sector').value || ''}\n`;
            formText += `رقم البلاغ: ${document.getElementById('report_number').value || ''}\n`;
            formText += `بداية الحدث: ${document.getElementById('start_hour').value || ''}:${document.getElementById('start_minute').value || ''}\n`;
            formText += `تعطل فرقة إسعافية: ${document.getElementById('unit_failure').value || ''}\n`;
            formText += `نوع العطل: ${document.getElementById('failure_type').value || ''}\n`;
            formText += `نوع البلاغ: ${document.getElementById('report_type').value || ''}\n`;
            formText += `الأضرار: ${document.getElementById('damages').value || ''}\n`;
            formText += `الإجراءات المتخذة: ${document.getElementById('actions_taken').value || ''}\n`;
            formText += `التأثير على الخدمة: ${document.getElementById('service_impact').value || ''}\n`;
            formText += `نهاية الحدث: ${document.getElementById('end_hour').value || ''}:${document.getElementById('end_minute').value || ''}\n`;
        }

        // تحديث خاصية data-clipboard-text للزر
        const copyButton = document.getElementById('copyButton');
        if (copyButton) {
            copyButton.setAttribute('data-clipboard-text', formText);
        }
    }

    function initializeClipboard(formName) {
        // التأكد من أن Clipboard.js مهيأ للزر الحالي
        const copyButton = document.getElementById('copyButton');
        if (copyButton) {
            if (copyButton._clipboard) {
                // إذا كان Clipboard.js مهيأ مسبقًا لهذا الزر، قم بتدميره
                copyButton._clipboard.destroy();
            }

            // تهيئة Clipboard.js للزر الجديد
            copyButton._clipboard = new ClipboardJS(copyButton);

            copyButton._clipboard.on('success', function() {
                const notification = document.getElementById('copyNotification');
                notification.style.display = 'block';
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            });

            copyButton._clipboard.on('error', function() {
                const errorNotification = document.getElementById('copyError');
                errorNotification.style.display = 'block';
                setTimeout(() => {
                    errorNotification.style.display = 'none';
                }, 3000);
            });
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        loadForm('senior_paramedic'); // تحميل النموذج الافتراضي
    });
</script>

</body>
</html>

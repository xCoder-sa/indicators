<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مؤشرات الأداء</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        .chart-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        .chart-item {
            width: 45%;
            margin-bottom: 30px;
        }
        #indicatorContainer {
            margin-top: 50px;
        }
        #indicatorContainer .chart-item {
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>مؤشرات الأداء</h1>
    <div>
        <label for="startDate">من:</label>
        <input type="date" id="startDate">
        <label for="endDate">إلى:</label>
        <input type="date" id="endDate">
        <button onclick="filterByDate()">فلترة</button>
        <button onclick="clearFilter()">محو الفلتر</button>
    </div>

    <div class="chart-container">
        <div class="chart-item">
            <canvas id="chartDoughnut"></canvas>
        </div>
        <div class="chart-item">
            <canvas id="chartBar"></canvas>
        </div>
        <div class="chart-item">
            <canvas id="chartStackedBar"></canvas>
        </div>
        <div class="chart-item">
            <canvas id="chartRadar"></canvas>
        </div>
    </div>

    <h2>مؤشرات الأداء حسب القطاع</h2>
    <div id="indicatorContainer">
        <div class="chart-item">
            <canvas id="indicatorChart"></canvas>
        </div>
    </div>

    <script>
        let workingVehicles = 80;
        let totalVehicles = 100;
        let logisticsOpenReportDay1 = 5;
        let logisticsOpenReportDay2 = 3;
        let logisticsOpenReportDay3 = 4;

        // Doughnut chart for نسبة المركبات العاملة
        const ctxDoughnut = document.getElementById('chartDoughnut').getContext('2d');
        const doughnutChart = new Chart(ctxDoughnut, {
            type: 'doughnut',
            data: {
                labels: ['مركبات عاملة', 'مركبات متعطلة'],
                datasets: [{
                    data: [workingVehicles, totalVehicles - workingVehicles],
                    backgroundColor: ['#36a2eb', '#ff6384'],
                }]
            },
            options: {
                title: {
                    display: true,
                    text: 'نسبة المركبات العاملة من إجمالي المركبات'
                }
            }
        });

        // Bar chart for معدل البلاغات اللوجستية المفتوحة
        const ctxBar = document.getElementById('chartBar').getContext('2d');
        const barChart = new Chart(ctxBar, {
            type: 'bar',
            data: {
                labels: ['2024/09/01', '2024/09/02', '2024/09/03', '...'], 
                datasets: [{
                    label: 'البلاغات اللوجستية المفتوحة',
                    data: [logisticsOpenReportDay1, logisticsOpenReportDay2, logisticsOpenReportDay3],
                    backgroundColor: '#4bc0c0',
                }]
            },
            options: {
                title: {
                    display: true,
                    text: 'معدل البلاغات اللوجستية المفتوحة يوميًا'
                },
                scales: {
                    xAxes: [{
                        type: 'time',
                        time: {
                            unit: 'day'
                        }
                    }],
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });

        // Stacked Bar chart for عدد الفرق العاملة وعدد فرق التدخل السريع
        const ctxStackedBar = document.getElementById('chartStackedBar').getContext('2d');
        const stackedBarChart = new Chart(ctxStackedBar, {
            type: 'bar',
            data: {
                labels: ['القطاع 1', 'القطاع 2', 'القطاع 3'],
                datasets: [{
                    label: 'فرق عاملة',
                    data: [50, 40, 45],
                    backgroundColor: '#ffcd56',
                }, {
                    label: 'فرق التدخل السريع',
                    data: [20, 15, 10],
                    backgroundColor: '#ff6384',
                }]
            },
            options: {
                title: {
                    display: true,
                    text: 'عدد الفرق العاملة وعدد فرق التدخل السريع حسب القطاع'
                },
                scales: {
                    xAxes: [{
                        stacked: true
                    }],
                    yAxes: [{
                        stacked: true
                    }]
                }
            }
        });

        // Radar chart for عدد العاملين في التنسيق والتحكم وعدد العاملين في الدعم اللوجستي
        const ctxRadar = document.getElementById('chartRadar').getContext('2d');
        const radarChart = new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: ['تنسيق وتحكم', 'دعم لوجستي'],
                datasets: [{
                    label: 'القطاع 1',
                    data: [10, 8],
                    backgroundColor: 'rgba(179,181,198,0.2)',
                    borderColor: 'rgba(179,181,198,1)',
                }, {
                    label: 'القطاع 2',
                    data: [12, 10],
                    backgroundColor: 'rgba(255,99,132,0.2)',
                    borderColor: 'rgba(255,99,132,1)',
                }]
            },
            options: {
                title: {
                    display: true,
                    text: 'عدد العاملين في التنسيق والتحكم وعدد العاملين في الدعم اللوجستي'
                }
            }
        });

        // Indicator Chart - نسبة المركبات العاملة
        function showIndicatorChart(working, total) {
            const ctxIndicator = document.getElementById('indicatorChart').getContext('2d');
            new Chart(ctxIndicator, {
                type: 'doughnut',
                data: {
                    labels: ['مركبات عاملة', 'مركبات متعطلة'],
                    datasets: [{
                        data: [working, total - working],
                        backgroundColor: ['#36a2eb', '#ff6384'],
                    }]
                },
                options: {
                    title: {
                        display: true,
                        text: 'نسبة المركبات العاملة من إجمالي المركبات'
                    }
                }
            });
        }

        function filterByDate() {
            // فلترة البيانات بناءً على التاريخ المحدد
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            if (startDate && endDate) {
                // هنا من المفترض جلب البيانات التي تقع بين هذه التواريخ
                console.log(`فلترة من ${startDate} إلى ${endDate}`);
            } else {
                alert('يرجى تحديد التاريخ');
            }
        }

        function clearFilter() {
            // إعادة تعيين الفلتر
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';
            // إعادة تحميل البيانات الأصلية
            console.log('تم محو الفلتر');
        }
    </script>
</body>
</html>
